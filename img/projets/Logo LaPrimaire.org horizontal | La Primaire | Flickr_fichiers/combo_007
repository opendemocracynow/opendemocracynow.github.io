YUI.add("flickr-products-wallart-editWallart-updater",function(e,t){"use strict";function n(e,t,n){var r=e.response,i=e.wallartModelRegistry;i.exists(t)&&i.setValue(t,"price",r.wallart.price);if(this.pendingUpdate)return this.pendingUpdate=!1,this.startNextUpdate(t,n)}function r(e,t){return t.getModel("wallart-models",e).then(function(e){var t,n,r,i,s;return n=e.getValue("photo"),i=e.getValue("isCC"),s=e.getValue("isMK"),r=e.getValue("skuId"),i===!0?r+="_CC":s===!0&&(r+="_MK"),t={wallart_id:e.id,photo:{id:n.getValue("id"),owner:n.getValue("owner").getValue("id"),crop_x:e.getValue("cropX"),crop_y:e.getValue("cropY"),crop_h:e.getValue("cropH"),crop_w:e.getValue("cropW")},sku_id:r,orientation:e.getValue("orientation"),is_low_quality:e.getValue("isLowQuality")},{wallart:JSON.stringify(t)}})}function i(n,r){var i=this;return this.serialize(n,r).then(function(s){return(new e.FlickrPromise({response:r.callAPI("flickr.products.wallart.update",s),wallartModelRegistry:r.getModelRegistry("wallart-models")})).then(function(e){return i.processResponse(e,n,r)},function(e){throw i.pendingUpdate&&(i.pendingUpdate=!1),e}).then(null,e.FetcherErrorLogger(t))})}function s(){return this.updateInFlight=null,!0}function o(e,t){return this.updateInFlight=this.callAPI(e,t).then(this.clearUpdateInFlight.bind(this),this.clearUpdateInFlight.bind(this)),this.updateInFlight}function u(e,t){return this.pendingUpdate=null,this.startUpdate(e,t)}function a(e,t){return this.pendingUpdate?this.updateInFlight:this.updateInFlight?(this.pendingUpdate=!0,this.updateInFlight):this.startUpdate(e,t)}e.namespace("ModelUpdaters")["flickr-products-wallart-editWallart"]={run:a,serialize:r,callAPI:i,clearUpdateInFlight:s,startUpdate:o,processResponse:n,startNextUpdate:u}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("wallart-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-wallart"].run(t,this.appContext)},create:function(t){return e.ModelCreators["flickr-products-wallart-create"].run(t,this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-wallart-editWallart"].run(t,this.appContext)}},attributes:{owner:{isModel:!0},photo:{isModel:!0},photoDeleted:{defaultFn:function(){return!1}},isCC:{defaultFn:function(){return!1}},isMK:{defaultFn:function(){return!1}},photoSource:{},skuId:{},orientation:{},price:{},cropW:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropH:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropX:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropY:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},isLowQuality:{defaultFn:function(){return 0}},isEditable:{defaultFn:function(){return!0}},isDeleted:{defaultFn:function(){return!1}},invalidForPrintReason:{},isInvalidForPrint:{},created:{getter:function(e){return parseInt(e,10)}},updated:{getter:function(e){return parseInt(e,10)}},orders:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-wallart-fetcher","flickr-products-wallart-create-creator","flickr-products-wallart-editWallart-updater"]});
YUI.add("flickr-products-wallart-fetcher",function(e,t){"use strict";function n(t){var n={wallart_id:t.id,return_deleted:1,extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=r.wallart,c,h,p,d,v=!1,m=!1,g={};if(l)return p=s.addOrUpdate({id:l.owner}),g={photos:[l.photo],personModelRegistry:s,photoModelRegistry:o,photoEngagementModelRegistry:u,photoStatsModelRegistry:a,photoCurationModelRegistry:f},l.photo.ownerId&&(g.ownerID=l.photo.ownerId),h=e.APIHelper.response.parsePhotos(g)[0],l.skuId.substr(-2)==="CC"?(d=l.skuId.slice(0,-3),v=!0):l.skuId.substr(-2)==="MK"?(d=l.skuId.slice(0,-3),m=!0):d=l.skuId,c={id:l.wallartId,owner:p,photo:h,skuId:d,isCC:v,isMK:m,orientation:l.orientation,price:l.price,cropW:l.photo.cropW,cropH:l.photo.cropH,cropX:l.photo.cropX,cropY:l.photo.cropY,isEditable:l.isEditable,isDeleted:l.isDeleted,isLowQuality:l.isLowQuality,photoSource:l.photoSource,created:l.dateCreate},i.addOrUpdate(c),c}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.wallart.getDetails",this._processParams(n)),r.getModelRegistry("wallart-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models"),r.getModelRegistry("photo-curation-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-products-wallart"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["wallart-models","photo-models","person-models","photo-engagement-models","photo-stats-models","photo-curation-models"]});
YUI.add("photo-engagement-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.signinPendingQueue=e.signinPendingQueue,this},subviewConfig:{"fave-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,hideWhoFaved:!0},"photo-well-scrappy-edit-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-share-photo-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.get("photo"),t=e.getValue("owner"),n=e.getValue("isMarketplaceLicensable")&&this.appContext.flipper.getValue("licensing-button-placement")==="toolbar",r;return r={"share-view":this.subviews["fluid-share-photo-view"]?this.subviews["fluid-share-photo-view"].get("container"):"",photoId:e.getValue("id"),ownerId:e.getValue("owner").getValue("id"),isVideo:e.getValue("isVideo"),viewerIsOwner:t.getValue("isMe"),canCreateWallart:this.canCreateWallart(),isWallartLowQuality:this.isWallartLowQuality(),downloadingAvailable:!1,downloadLink:"",showLicenseButton:n,marketplaceLicensingUrl:e.getValue("marketplaceLicensingUrl")},e.getValue("isVideo")?(r.downloadLink="/video_download.gne?id="+e.getValue("id"),this.appContext.flipper.isFlipped("enable-album-download")&&(r.downloadingAvailable=e.getValue("engagement").getValue("canDownload")),t.getValue("isMe")&&(r.downloadingAvailable=!0)):(r.downloadLink=e.getValue("url")+"/sizes/l/",r.downloadingAvailable=!0),this.appContext.forceServerRender&&(r.downloadItems=this.getDownloadMenuItems()),this.setContainerWithTemplate("photo-engagement",r),r.canCreateWallart&&this.get("container").addClass("has-wallart"),n&&this.get("container").addClass("has-buyable"),this},buildErrorContainer:function(){this.setContainerHTML("")},activate:function(){var e=this.get("photo").getValue("license"),t=e!==0&&e!==7&&e!==8&&e!==10,n=e===8,r=e===9,i=e===10,s=this.get("container");if(this.signinPendingQueue&&this.signinPendingQueue.length>0){var o=this.signinPendingQueue;for(var u=0;u<o.length;u++)o[u].key==="download"&&o[u].value&&o[u].value.id===this.photoId&&this.downloadItem(o[u].value.imageUrl)}return this.appContext.flipper.isFlipped("enable-signed-out-download-cta-test")&&!this.appContext.getViewer().signedIn&&!this.appContext.getUA().isBot&&this.get("photo").getValue("owner").getValue("isPro")!==!0&&!t&&!n&&!r&&!i&&this.get("photo").getValue("visibilitySource")!==2&&(this.signedOutTest=!0),s.all(".sizes li a.download-image-size")&&this.registerEventHandler(s.all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this)),this.attachKeyEvent("down:68",this.handleDownloadMenuButtonClick.bind(this)),this.registerEventHandler(s.delegate("click",this.handleDownloadMenuButtonClick.bind(this),".download a")),this.registerEventHandler(s.delegate("click",this.createWallartClick.bind(this),".wallart a")),this.registerEventHandler(this.get("photo").on("valuesChanged",function(e){e.isMarketplacePrintable&&e.isMarketplacePrintable.newVal===!0&&(this.buildContainer(),this.getDownloadMenuItems(),this.get("container").all(".sizes li a.download-image-size")&&this.get("container").all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this))}.bind(this))),this.signedOutTest&&s.one(".all-sizes")&&this.registerEventHandler(s.one(".all-sizes").on("click",function(e){e.halt(),this.signUpAndDownloadItem()}.bind(this))),this.appContext.flipper.isFlipped("display-marketplace-licensable")&&s.one(".photoListLicenseButton")&&(this.registerEventHandler(s.one(".photoListLicenseButton").on("click",this.licenseButtonClick,this)),this.registerEventHandler(s.one(".photoListLicenseButton").on("mouseenter",this.licenseButtonHover,this)),this.registerEventHandler(s.one(".photoListLicenseButton").on("mouseleave",this.licenseButtonHover,this))),this},licenseButtonHover:function(t){var n=300;t.halt();var r=t.type,i=this;if(r==="mouseenter"){if(e.StorageHelper.getItem("seenThirdParty"))return;this.tooltip&&this.tooltip.close(),clearTimeout(this.tooltipHoverTimer),this.isHovering=!0,this.tooltipHoverTimer=setTimeout(function(){i.isHovering&&(i.tooltip=new e.Views.FluidDroparound({appContext:i.appContext,showDropArrow:!0,dismissOnOverlayClick:!1,dismissOnActionClick:!1,observePageResize:!0,anchorElement:t.target,positionFixed:!0,closeOnScroll:!0,hideModalOverlay:!0,invisibleOverlay:!0,autoSizeToContent:!0,useAnchorOffsetSize:!0,horizCenterToAnchor:!0,preferTop:!0,classList:"photo-license-pop-up",textMessage:i.intlMessage({intlName:"common.CLICK_BUTTON_THIRD_PARTY"})}),i.tooltip.show())},n)}else this.isHovering=!1,this.tooltip&&this.tooltip.close()},licenseButtonClick:function(t){var r={owner_id:t.target.getData("ownerid"),photo_id:t.target.getData("photoid")};this.appContext.callAPI("flickr.licensing.marketplace.addClick",r).then(function(){e.StorageHelper.setItem("seenThirdParty",1)},function(e){n.error("flickr.licensing.marketplace.addClick failed",{photoId:r.photo_id})})},canCreateWallart:function(){var e=!1,t,n=this.appContext.getViewer(),r,i,s,o,u;return t=this.get("photo"),t&&n&&(i=!1,r=t.getValue("owner").getValue("isMe"),s=t.getValue("isMarketplacePrintable"),u=t.getValue("safetyLevel")===0,o=!t.getValue("isVideo"),this.appContext.flipper.isFlipped("creative-commons-wallart")?r?this.appContext.getViewer().signedIn&&o&&(e=!0):i?this.appContext.getViewer().signedIn&&o&&u&&(e=!0):s&&this.appContext.getViewer().signedIn&&o&&u&&(e=!0):this.appContext.getViewer().signedIn&&r&&o&&(e=!0)),e},isWallartLowQuality:function(){var t=this.get("photo");return this.wallartHelper||(this.wallartHelper=new e.WallartHelper),this.wallartHelper.isPhotoWallartable(t).skus.length===0?!0:!1},createWallartClick:function(n){var r=
this,i="/create/wallart/",s=this.get("photo"),o;n.halt(),e.rapidTracker.beacon(t,"createWallartClick");if(s.getValue("hasInvalidColorspaceForPrint"))return this.handleLacksWallartability("COLORSPACE");this.wallartHelper||(this.wallartHelper=new e.WallartHelper(this.appContext));if(this.wallartHelper.isPhotoWallartable(s).skus.length===0)return this.handleLacksWallartability("LOW_QUALITY");this.appContext.getModelRegistry("wallart-models").then(function(t){t.remoteCreate({nsid:r.appContext.getViewer().nsid,photoId:s.getValue("id")}).then(function(t){i+=t.getValue("id")+"/edit",YUI.Env.isServer||(!r.appContext.secure&&window.location.host===e.config.flickr.url.host?e.config.win.location.href=i:r.appContext.flapp.navigate(i))},function(t){o=new e.Views.FluidModal({appContext:r.appContext,darkOverlay:!0,dismissOnOverlayClick:!0,actionButtonLabel:r.intlMessage({intlName:"common.OK"}),title:r.intlMessage({intlName:"common.UPLOAD_ERROR_TITLE"}),message:"There was a problem creating your wall art. Please try again later."}),o.show()})})},handleLacksWallartability:function(t){var n,r;t==="LOW_QUALITY"?r="Looks like this photo doesn't meet the minimum requirements to get printed. Please choose a photo that's at least 975 &times; 825 pixels. Learn more about <a href='http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567'>requirements</a> for print products.":t==="COLORSPACE"&&(r="Sorry, we cannot print photos with a CMYK or ProPhoto RGB colorspace. We recommend photos with an sRGB color space. <a href='https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33'>Learn more</a>."),n=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,showCancelX:!0,title:"Try a different photo",message:r,classList:"lacks-wallartability"}),n.show()},getDownloadMenuItems:function(t){var n=e.clone(this.get("photo").toJSON()),r,i=[],s,o=this.get("photo").getValue("engagement").getValue("canDownload"),u=!1;if(!n||!n.sizes)return"";n.sizes.q&&(n.sizes.q.label=this.intlMessage({intlName:"photo-page-scrappy.SQUARE"}),i.push(n.sizes.q)),n.sizes.s&&(n.sizes.s.label=this.intlMessage({intlName:"photo-page-scrappy.SMALL"}),i.push(n.sizes.s)),n.sizes.z&&(n.sizes.z.label=this.intlMessage({intlName:"photo-page-scrappy.MEDIUM"}),i.push(n.sizes.z)),n.sizes.k?(n.sizes.k.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.k)):n.sizes.h?(n.sizes.h.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.h)):n.sizes.l&&(n.sizes.l.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.l)),n.sizes.o&&(n.sizes.o.label=this.intlMessage({intlName:"photo-page-scrappy.ORIGINAL"}),i.push(n.sizes.o));for(s=0;s<i.length;s++)i[s].url=i[s].displayUrl.replace(/^(.+)(\..+)$/,"$1_d$2");return o&&(u=!0),r=this.templates("scrappy-download-menu")({photo:n,sizes:i,showDownloadSizes:u}),r},createDownloadDialog:function(t){var n=this.get("container"),r=this;this.downloadMenu&&(this.downloadMenu.close(),this.downloadMenu=null),this.downloadMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,preferTop:!0,showDropArrow:!0,anchorOffsetHorizontal:3,anchorElement:n.one(".download"),htmlMessage:t,closeOnScroll:!1,classList:"download-dialog-tooltip",hideModalOverlay:!0}),this.downloadMenu.on("activated",function(e){r.fire("subviewViewEvent","make in view",n)}),this.downloadMenu.on("closeDroparound",function(e){r.fire("subviewViewEvent","close in view")}),this.downloadMenu.show()},handleDownloadMenuButtonClick:function(n){var r=this.get("photo"),i;if(n.target.ancestor(".download",!0).hasClass("disabled"))n.preventDefault();else if(r.getValue("isVideo"))if(!this.appContext.flipper.isFlipped("enable-album-download")){i=r.getValue("owner").getValue("isMe");if(!i)return n.preventDefault(),!1}else this.handleDownloadItemClick(n);else n.halt(),this.createDownloadDialog(this.getDownloadMenuItems());e.rapidTracker.beacon(t,"downloadDialogClick")},handleDownloadItemClick:function(n){n.preventDefault();var r;r=n.currentTarget.getAttribute("href"),this.signedOutTest?this.signUpAndDownloadItem(r):this.downloadItem(r),e.rapidTracker.beacon(t,"photoDownloadClick"),this.downloadMenu.close()},downloadItem:function(e){document.location=e},signUpAndDownloadItem:function(t){var n=this,r=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_TITLE"}),i=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_MESSAGE"}),s,o;this.get("photo").getValue("isVideo")&&this.appContext.lang.toLowerCase()==="en-us"&&(r=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_VIDEO_TITLE"})),s=e.url(e.URLHelper.getPhotoPage({photoId:this.photoId,pathAlias:this.nsid})),o=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-download",signUpTitle:r,signUpMessage:i,beaconPrefix:"download"}),o.on("signUpClick",function(r){t?e.SigninHelper.signUpPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignUp("download",{postLoginUrl:s+"sizes/l/"})}),o.on("signInClick",function(r){t?e.SigninHelper.addPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignin("download",{postLoginUrl:s+"sizes/l/"})}),o.show()}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-engagement","hermes-template-scrappy-download-menu","wallart-helper","signup-modal-view","fluid-share-photo-view","fluid-droparound-view","better-throttle"],optional:["photo-models","wallart-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("seo",function(e,t){e.Seo={appContext:{},stripTags:function(e){return e?String(e).replace(/<\/?[^>]+>/g,""):""},collapseWhitespace:function(e){return e.trim().replace(/\s+/g," ")},decodeEntities:function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")},cleanText:function(e){return this.collapseWhitespace(this.decodeEntities(this.stripTags(e)))},getSEOTitleForPhoto:function(e){var t=this.cleanText(e.getValue("title")),n=this.cleanText(e.getValue("description")),r=this.cleanText(e.getValue("owner").getValue("displayname")),i="",s="| Flickr",o=70,u=o-(t.length+s.length+5);return t.length>=50?i=t.slice(0,58)+(t.length<58?" ":"\u2026 "):t.length>20&&t.length<50?n.length>20?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i=t+" | "+r+" ":t.length<=20&&t.length>0?n.length>50?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i=t+" | "+r+" ":n.length>50?i=n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i="Untitled | "+r+" ",i},generateSEODescriptionForPhoto:function(e,t,n,r,i){var s=e.getValue("og:title"),o=e.getValue("og:description"),u="",a=160;return s==="Untitled"&&(s=r),o.length>120?u=o.slice(0,120)+(o.length<120?" ":"\u2026 ")+n+" "+i+".":o.length>60&&o.length<120?u=o+(o.slice(o.length-1,o.length)==="."?" ":". ")+s.slice(0,40)+(s.length<40?" ":"\u2026 ")+n+" "+i+".":o.length<=60&&(u=s+(s.slice(s.length-1,s.length)==="."?" ":". ")+o.slice(0,a-s.length)+(o.length<a-s.length?" ":"\u2026 ")+n+" "+i+"."),u}}},"@VERSION@",{requires:[]});
YUI.add("hermes-template-empty-photo-page",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="fluid-centered" style="text-align: center;">\n	<h3>'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.TIMEOUT_FAILURE"},data:i}))+"</h3>\n</div>\n\n"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/empty-photo-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'			<li role="menuitem" class="gn-signup">\n				<a data-track="gnSignupClick" class="gn-title butt" href="/signup">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n			</li>\n"},3:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'			<li role="menuitem" data-context="you">\n				<a data-track="gnYouMainClick" class="gn-title you" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'" aria-haspopup="true">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCameraRollClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'<span class="label-beta">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.BETA"},data:i}))+'</span></a></li>\n					<li class="menuitem"><a data-track="gnYouPhotostreamClick" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouSetsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:"")+'</a></li>\n					<li class="menuitem"><a data-track="gnYouMapClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.map:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.MAP"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouFavoritesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouGalleriesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnYouRecentActivityClick" href="/activity">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a></li>\n					"+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n					<li class="menuitem"><a data-track="gnYouOrganizeClick" href="/photos/organize">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+'</a></li>\n					<li class="menuitem"><a class="server-only-link" data-track="gnYouCreationsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.creations:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CREATIONS"},data:i}))+"</a></li>\n				</ul>\n			</li>\n"},4:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SETS"},data:i}))},6:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:i}))},8:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<li class="menuitem"><a data-track="gnYouStatsClick" href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a></li>"},10:function(e,t,n,r,i){var s,o=e.escapeExpression;return'			<li class="toplink">\n				<a data-track="gnYouMainClick" class="gn-link" href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.photostream:s,t))+'"><span>'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.YOUR_PHOTOSTREAM"},data:i}))+"</span></a>\n			</li>\n"},12:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'			<li role="menuitem" data-context="contacts">\n				<a data-track="gnContactsMainClick" class="gn-title contacts" href="/photos/friends" aria-haspopup="true">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.PEOPLE"},data:i}))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnContactsRecentPhotosClick" href="/photos/friends">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.PHOTOS_FROM"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsPhotosOfContactsClick" href="/photosof/contacts">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.PHOTOS_OF"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsContactListClick" href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.list:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.LIST"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnContactsAddContactsClick" href="/import/people">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FIND_FRIENDS"},data:i}))+"</a></li>\n				</ul>\n			</li>\n"
},14:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'			<li role="menuitem" data-context="groups">\n				<a data-track="gnGroupsMainClick" class="gn-title groups" href="/groups" aria-haspopup="true">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li class="menuitem"><a data-track="gnGroupsGroupsListClick" href="/groups">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS_LIST"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsRecentDiscussionsClick" href="/recent.gne">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_DISCUSSIONS"},data:i}))+'</a></li>\n					<li class="menuitem"><a data-track="gnGroupsCreateAGroupClick" href="/groups_create.gne">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_A_GROUP"},data:i}))+"</a></li>\n				</ul>\n			</li>\n"},16:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'			<li role="menuitem" data-context="explore">\n				<a data-track="gnExploreMainClick" class="gn-title explore" href="/explore" aria-haspopup="true">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<li role="menuitem"><a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+"</a></li>\n					"+((s=n["if"].call(o,t!=null?t.enableVRLanding:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n					<li role="menuitem"><a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreWorldMapClick" href="/map">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreAppGardenClick" href="/services">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.APP_GARDEN"},data:i}))+'</a></li>\n					<li role="menuitem"><a data-track="gnExploreCameraFinderClick" href="/cameras">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+"</a></li>\n					"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n					<li role="menuitem"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a></li>\n				</ul>\n			</li>\n"},17:function(e,t,n,r,i){return'<li role="menuitem"><a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>'},19:function(e,t,n,r,i){return'<li role="menuitem"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a></li>"},21:function(e,t,n,r,i){return'			<li role="menuitem" class="gn-create">\n				<a data-track="gnCreateMainClick" class="gn-title" href="/create">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+"</a>\n			</li>\n"},23:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'			<li role="menuitem" data-context="create">\n				<a data-track="gnCreateMainClick" class="gn-title create" href="/create" aria-haspopup="true">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'</a>\n				<ul class="gn-submenu" role="menu">\n					<!-- <li class="menuitem"><a data-track="gnCreateFooClick" href="/foo">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.FOO"},data:i}))+"</a></li> -->\n				</ul>\n			</li>\n"},25:function(e,t,n,r,i){return'			<li role="menuitem" class="gn-upload">\n				<a data-track="gnUploadMain" class="gn-title" href="/upload">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+"</a>\n			</li>\n"},27:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showAutosuggest:t,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.program(30,i,0),data:i}))!=null?s:""},28:function(e,t,n,r,i){return'				<li role="menuitem">\n					'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["autosuggest-view"]:t,{name:"outlet",hash:{},data:i}))+"\n				</li>\n"},30:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<li role="menuitem">\n					<form method="get" role="search">\n						<input type="text" name="text" value="'+a((s=(s=n.searchValue||(t!=null?t.searchValue:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"searchValue",hash:{},data:i}):s))+'" id="gn-search-field" autocomplete="off" aria-label="Search" role="textbox">\n						<input type="submit" data-track="gnSearchSearchIcon" class="search-icon" tabindex="-1" aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName
:"global-nav.SEARCH"},data:i}))+'" role="button">\n					</form>\n				</li>\n'},32:function(e,t,n,r,i){return'			<li role="menuitem">\n				'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["notifications-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n			</li>\n"},34:function(e,t,n,r,i){return'			<li role="menuitem">\n				'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["account-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n			</li>\n"},36:function(e,t,n,r,i){return'			<li role="menuitem" class="gn-signin">\n				<a data-track="gnSignin" class="gn-title" href="/signin">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.SIGN_IN"},data:i}))+"</a>\n			</li>\n"},38:function(e,t,n,r,i){return"	"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["browser-upgrade-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["mobile-app-upsell-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="global-nav-old">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid">\n	<a href="https://'+f((o=(o=n.host||(t!=null?t.host:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"host",hash:{},data:i}):o))+'" class="main-logo" data-track="gnLogoClick" title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'"></a>\n\n	<ul class="nav-menu" role="menubar">\n\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_link:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.contacts_menu:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.groups_menu:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_link:s,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_menu:s,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_link:s,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	</ul>\n\n	<ul class="gn-tools">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.search_bar:s,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showNotificationsMenu:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.account_menu:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signin_link:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</ul>\n</div>\n\n"+((s=n["if"].call(u,t!=null?t["show-browser-upgrade-banner"]:t,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["person-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav-restyle",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:""},2:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li role="menuitem"\n					class="gn-signup"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n					<a data-track="gnSignupClick"\n						class="gn-title butt"\n						href="/signup">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n				</li>\n"},4:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'				<li role="menuitem"\n					data-context="you"\n					aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'">\n					<a data-track="gnYouMainClick"\n						class="gn-title you"\n						href="'+a(f((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'"\n						aria-haspopup="true"\n						aria-expanded="false">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'</a>\n					<ul class="gn-submenu" role="menu" aria-label="submenu">\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n							<a data-track="gnYouCameraRollClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'">\n							<a data-track="gnYouPhotostreamClick" href="'+a(f((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'">\n							<a data-track="gnYouSetsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'">\n							<a data-track="gnYouFavoritesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'">\n							<a data-track="gnYouGroupsClick" href="/groups">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'">\n							<a data-track="gnYouGalleriesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATIONS"},data:i}))+'">\n							<a data-track="gnYouCreationsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.creations:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATIONS"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'">\n							<a data-track="gnYouPeopleClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.people:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'</a>\n						</li>\n						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'">\n							<a data-track="gnYouRecentActivityClick" href="/activity">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a>\n						</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+'						<li class="menuitem"\n							role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+'">\n							<a data-track="gnYouOrganizeClick" href="/photos/organize">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+"</a>\n						</li>\n					</ul>\n				</li>\n"},5:function(e,t,n,r,i){return e.escapeExpression(
(n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SETS"},data:i}))},7:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:i}))},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+'">\n								<a data-track="gnYouStatsClick" href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a>\n							</li>\n"},11:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<li class="toplink"\n					role="menuitem"\n					aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n					<a data-track="gnYouMainClick"\n					class="gn-link"\n					href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'"><span>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+"</span></a>\n				</li>\n"},13:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<li role="menuitem"\n					data-context="explore"\n					aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'">\n					<a data-track="gnExploreMainClick"\n						class="gn-title explore"\n						href="/explore"\n						aria-haspopup="true"\n						aria-expanded="false">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a>\n					<ul class="gn-submenu" role="menu" aria-label="submenu">\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'">\n							<a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></li>\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+" "+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.NEW"},data:i}))+'">\n							<a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'<span class="label-beta">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.NEW"},data:i}))+"</span></a></li>\n"+((s=n["if"].call(o,t!=null?t.enableVRLanding:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+'						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'">\n							<a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a>\n						</li>\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'">\n							<a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'</a>\n						</li>\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'">\n							<a data-track="gnExploreWorldMapClick" href="/map">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'</a>\n						</li>\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.APP_GARDEN"},data:i}))+'">\n							<a data-track="gnExploreAppGardenClick" href="/services">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.APP_GARDEN"},data:i}))+'</a>\n						</li>\n						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+'">\n							<a data-track="gnExploreCameraFinderClick" href="/cameras">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+"</a>\n						</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+'						<li role="menuitem"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+'">\n							<a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a>\n						</li>\n					</ul>\n				</li>\n"},14:function(e,t,n,r,i){return'							<li role="menuitem"\n								aria-label="Flickr VR">\n								<a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>\n'},16:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'							<li role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+'">\n								<a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+
u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a>\n							</li>\n"},18:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li role="menuitem"\n					class="gn-create"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">\n					<a data-track="gnCreateMainClick"\n					class="gn-title"\n					href="/create">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+"</a>\n				</li>\n"},20:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li role="menuitem"\n					data-context="create"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">\n					<a data-track="gnCreateMainClick"\n					class="gn-title create"\n					href="/create">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+"</a>\n				</li>\n"},22:function(e,t,n,r,i){return" with-upload-icon"},24:function(e,t,n,r,i){return" with-notifs-icon"},26:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li class="gn-upload"\n					role="menuitem"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'">\n					<a data-track="gnUploadMain"\n					class="gn-title"\n					href="/upload">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+"</a>\n				</li>\n"},28:function(e,t,n,r,i){var s;return'				<li class="gn-search-box"\n					role="menuitem">\n					<svg class="icon icon-search mobile-search-button">\n						<use xlink:href="#icon-search"></use>\n					</svg>\n\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.enableNewAutosugest:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.program(31,i,0),data:i}))!=null?s:"")+'\n					<svg class="mobile-search-close-button"><use xlink:href="#icon-close"></use></svg>\n				</li>\n'},29:function(e,t,n,r,i){return"							"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["search-autosuggest-field-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},31:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'						<form method="get" role="search">\n							<input id="gn-search-field"\n								type="text"\n								placeholder="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"},data:i}))+'"\n								name="text"\n								value="'+a((s=(s=n.searchValue||(t!=null?t.searchValue:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"searchValue",hash:{},data:i}):s))+'"\n								autocomplete="off"\n								role="textbox"\n								aria-label="Search">\n							<label data-track="gnSearchSearchIcon"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.SEARCH"},data:i}))+'">\n								<svg class="search-icon"\n									style="width: 22px; height: 22px;"\n									data-track="gnSearchSearchIcon"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.SEARCH"},data:i}))+'">\n									<use xlink:href="#icon-search"></use>\n								</svg>\n								<input type="submit"\n									data-track="gnSearchSearchIcon"\n									class="search-icon-button"\n									tabindex="-1"\n									role="button"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.SEARCH"},data:i}))+'">\n							</label>\n						</form>\n'},33:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li class="gn-upload"\n					role="menuitem">\n					<a data-track="gnUploadIconMain"\n						class="gn-title"\n						href="/upload"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'">\n						<i class="upload-icon" title="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'" aria-hidden="true">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+"</i>\n					</a>\n				</li>\n"},35:function(e,t,n,r,i){return'				<li role="menuitem">\n					'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["notifications-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n				</li>\n"},37:function(e,t,n,r,i){return'				<li role="menuitem">\n					'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["account-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n				</li>\n"},39:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li class="gn-signin"\n					role="menuitem"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.SIGN_IN"},data:i}))+'">\n					<a data-track="gnSignin"\n						class="gn-title"\n						href="/signin">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.SIGN_IN"},data:i}))+"</a>\n				</li>\n"},41:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))!=null?s:""},42:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'				<li class="gn-signup"\n					role="menuitem"\n					aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n					<a data-track="gnSignupClick"\n						class="gn-title butt"\n						href="/signup">'+
u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n				</li>\n"},44:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item mobile-nav-menu-title">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'</div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+a(f((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouGalleriesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouRecentActivityClick" href="/activity">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+"</a></div>\n					"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(45,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				</div>\n"},45:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<div class="mobile-nav-menu-item"><a data-track="gnYouStatsClick" href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a></div>"},47:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<div class="mobile-nav-column">\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreMainClick" class="explore" href="/explore" aria-haspopup="true">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'<span class="label-beta">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.NEW"},data:i}))+'</span></a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a></div>\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+"</a></div>\n					"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n					<div class="mobile-nav-menu-item"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a></div>\n				</div>\n"},48:function(e,t,n,r,i){return'<div class="mobile-nav-menu-item"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a></div>"},50:function(e,t,n,r,i){return"	"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["browser-upgrade-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["mobile-app-upsell-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="global-nav-restyle">\n<div class="global-nav-shim"></div>\n<div class="global-nav-content styleguide-global-nav fluid sohp-mobile-navable">\n	<div class="global-nav-container fluid-centered" role="navigation" aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.MAIN"},data:i}))+'">\n		<div class="mobile-nav-toggle"><span></span></div>\n\n		<div class="flickr-logo-container">\n			<a href="https://'+f((o=(o=n.host||(t!=null?t.host:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"host",hash:{},
data:i}):o))+'"\n				class="main-logo"\n				data-track="gnLogoClick"\n				title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'"\n				role="heading"\n				aria-level="1"\n				aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'">\n				<svg class="icon-flickr"><use xlink:href="#icon-flickr_logo"></use></svg>\n			</a>\n		</div>\n\n		<ul class="nav-menu" role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_link:s,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_link:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_menu:s,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n		</ul>\n\n		<ul class="gn-tools'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_icon:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.showNotificationsMenu:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"\n			role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_link:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.search_bar:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_icon:s,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showNotificationsMenu:t,{name:"if",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.account_menu:s,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signin_link:s,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		</ul>\n\n		<div class="mobile-nav">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</div>\n	</div>\n</div>\n\n"+((s=n["if"].call(u,t!=null?t["show-browser-upgrade-banner"]:t,{name:"if",hash:{},fn:e.program(50,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["person-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["signup-rail-view"]:t,{name:"outlet",hash:{},data:i}))+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("search-helper",function(e){function b(e){return!e[r.userId]&&!e[r.groupId]&&!e[r.tags]&&!e[r.text]&&!e[r.license]&&!e[r.faves]&&!e[r.contacts]&&!e[r.getty]&&!e[r.commons]&&!e[r.minTakenDate]&&!e[r.maxTakenDate]&&!e[r.minUploadDate]&&!e[r.maxUploadDate]&&!e[r.hasGeo]&&!e[r.boundingBox]&&!e[r.woeId]&&!e[r.camera]&&!e[r.minExposure]&&!e[r.maxExposure]&&!e[r.minAperture]&&!e[r.maxAperture]&&!e[r.minFocalLength]&&!e[r.maxFocalLength]&&!e[r.foursquareWoeId]&&!e[r.foursquareVenueId]&&!e[u.username]}function w(e,t){var n;for(n in c){if(!t&&n===e)return c[n];if(t&&c[n]===e)return n}}function E(e){var n={nsid_or_path_alias:"userId",group_id:"groupId",set_id:"setId",page_number:"page",tag_list:"tags",location:"text",slideshow_start_id:"slideshowStartId"},i,s={};for(i in n)e[i]&&(s[r[n[i]]]=e[i]);return s[r.groupId]&&!t.nsid(s[r.groupId])&&(s[r.groupPathAlias]=s[r.groupId],delete s[r.groupId]),s}function S(e,t){var n={},r=null,s=t.getViewer();e=e||{},e.q&&(n[u.username]=e.q);if(e.s)switch(e.s){case"age":n[u.sort]=i.oldestJoined;break;case"pho":n[u.sort]=i.mostPhotos}e.see&&e.see.toString().toLowerCase()==="all"&&s.signedIn&&(n[u.userId]=s.nsid),e.m&&(e.m.toString().toLowerCase()==="extras",e.m.toString().toLowerCase()==="names");for(r in e)o.indexOf(r)===-1&&(n[r]=e[r]);return n}function x(e,t){var n={},r=null,s;e=e||{},s=e.m&&e.m.toString().toLowerCase()==="discuss",e.q&&(n[f.text]=e.q),s;if(e.s)switch(e.s){case"act":s?n[f.sort]=i.discussionActivity:n[f.sort]=i.activity;break;case"siz":n[f.sort]=i.size;break;case"age":n[f.sort]=i.newest;break;case"rep":}for(r in e)a.indexOf(r)===-1&&(n[r]=e[r]);return n}function T(s,o){if(!s)return{};var u={},a,f,l=o.getViewer(),h=s.l,p=s.s,d=s.w,v,m=s.m,g=s.q,y;s.d&&typeof s.d=="string"&&(v=s.d.split("-")),s.q&&(u[r.text]=s.q),typeof s["ss"]!="undefined"&&(u[r.safeSearch]=parseInt(s.ss,10)+1),typeof s["ct"]!="undefined"&&(u[r.contentType]=parseInt(s.ct,10)+1),typeof s["mt"]!="undefined"&&(u[r.mediaType]=s.mt),s.b&&(u[r.boundingBox]=s.b),s.a&&(u[r.accuracy]=s.a),s.e&&(u[r.woeId]=s.e),s.g&&(u[r.groupId]=s.g),s.cm&&(u[r.camera]=s.cm),typeof s["xel"]!="undefined"&&(u[r.minExposure]=s.xel),typeof s["xeh"]!="undefined"&&(u[r.maxExposure]=s.xeh),typeof s["xal"]!="undefined"&&(u[r.minAperture]=s.xal),typeof s["xah"]!="undefined"&&(u[r.maxAperture]=s.xah),typeof s["xfl"]!="undefined"&&(u[r.minFocalLength]=s.xfl),typeof s["xfh"]!="undefined"&&(u[r.maxFocalLength]=s.xfh),s.eui&&(u[r.excludeUserId]=s.eui);if(typeof h!="undefined")switch(h){case"cc":case"comm":case"deriv":case"commderiv":u[r.license]=c[h];break;default:f=parseInt(h,10),f>=0&&f<=10&&(u[r.license]=f)}if(p)switch(p){case"rec":u[r.sort]=i.recent;break;case"rel":u[r.sort]=i.relevant;break;case"int":u[r.sort]=i.interesting;break;default:}s.hd&&(u[r.media]="hdvideo");if(d&&typeof d=="string")if(d.indexOf("faves")!==-1)y=d.split("-"),u[r.faves]=1,y.length>1?u[r.userId]=y[1]:l.signedIn&&(u[r.userId]=l.nsid);else if(t.nsid(d))m==="pool"?u[r.groupId]=d:u[r.userId]=d;else switch(d){case"contacts":u[r.contacts]="all";break;case"ff":u[r.contacts]="ff";break;case"getty":u[r.getty]="true";break;case"commons":u[r.commons]="true";break;case"usg":u[r.license]=8;break;case"all":default:}if(v)switch(v[0]){case"taken":v[1]&&(u[r.minTakenDate]=e.flutil.parseYYYYMMDDDatestamp(v[1])/1e3),v[2]&&(u[r.maxTakenDate]=e.flutil.parseYYYYMMDDDatestamp(v[2])/1e3);break;case"posted":v[1]&&(u[r.minUploadDate]=e.flutil.parseYYYYMMDDDatestamp(v[1])/1e3),v[2]&&(u[r.maxUploadDate]=e.flutil.parseYYYYMMDDDatestamp(v[2])/1e3);break;default:}if(m&&g)switch(m){case"tags":u=e.merge(u,this.processTags(g)),delete u[r.text];break;default:}for(a in s)n.indexOf(a)===-1&&(u[a]=s[a]);return u}function N(e){var t={},n=e[r.userId];return e[r.text]?t.q=e[r.text]:e[r.tags]&&(t.q=e[r.tags]),e[r.faves]?n?t.w="faves-"+n:t.w="faves":n?t.w=n:e[r.contacts]==="all"?t.w="contacts":e[r.contacts]==="ff"?t.w="ff":e[r.getty]==="true"?t.w="getty":e[r.commons]==="true"?t.w="commons":parseInt(e[r.license],10)===8&&(t.w="usg"),e[r.license]&&(t.l=w(e[r.license],!0)),t}function C(e,t){e[r.license]&&(e[r.license]===c.all||e[r.license]==="")&&delete e[r.license]}function k(e){}function L(e){}function A(e,t){for(var n in e)t.indexOf(n)===-1&&delete e[n]}function O(e){this.clearParams(e,g)}function M(e){this.clearParams(e,m)}function _(t){var n=e.clone(t)||{};return delete n.page,delete n.method,delete n.extras,e.QueryString.stringify(n)}function D(t){var n=t[r.groupId],i=t[r.tags],s=t[r.text];YUI.Env.isServer&&(n&&(t[r.groupId]=e.flutil.unescape(n)),i&&(t[r.tags]=e.flutil.unescape(i)),s&&(t[r.text]=e.flutil.unescape(s)))}function P(e){var t=0;return e.photos&&!e.screenshots&&!e.other?t=1:!e.photos&&e.screenshots&&!e.other?t=2:!e.photos&&!e.screenshots&&e.other?t=3:e.photos&&e.screenshots&&!e.other?t=4:!e.photos&&e.screenshots&&e.other?t=5:e.photos&&!e.screenshots&&e.other?t=6:e.photos&&e.screenshots&&e.other&&(t=7),t}function H(e){var t={},n=parseInt(e,10);switch(n){case 1:t.photos=!0;break;case 2:t.screenshots=!0;break;case 3:t.other=!0;break;case 4:t.photos=!0,t.screenshots=!0;break;case 5:t.other=!0,t.screenshots=!0;break;case 6:t.photos=!0,t.other=!0;break;default:t.photos=!0,t.screenshots=!0,t.other=!0}return t}function B(t){var n=e.AttributeHelpers.coerceInteger(t);return e.AttributeHelpers.coerceString(n+1)}function j(n,i){var s=i.getViewer(),o;return n[r.userId]?s&&s.signedIn&&s.nsid===n[r.userId]?n[r.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.YOUR_PHOTOS"}):(t.nsid(n[r.userId])?o=n[r.userId]:o={pathAlias:n[r.userId]},i.getModel("person-models",o).then(function(e){var t;return n[r.faves]?t="search.FAVES_POSSESSIVE":t="search.PHOTOS_POSSESSIVE",{intlName:t,name:e.getValue("displayname")}})):n[r.contacts]?e.Promise.resolve({intlName:"search.FROM_PEOPLE_YOU_FOLLOW"}):n[r.groupId]||n[r.groupPathAlias]?(n[r.groupId]?o={id:n[r.groupId]}:o={pathAlias:n[r.groupPathAlias]},i.getModel("group-info-models",o).then(function(e){return{
intlName:"search.IN_GROUP_POOL",name:e.getValue("group").getValue("title")}})):n[r.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.EVERYONES_PHOTOS"})}function F(n,i){var s=i.getViewer(),o;if(n[r.userId])return s&&s.signedIn&&s.nsid===n[r.userId]?e.Promise.resolve({intlName:"search.PEOPLE_YOU_FOLLOW"}):(t.nsid(n[r.userId])?o=n[r.userId]:o={pathAlias:n[r.userId]},i.getModel("person-models",o).then(function(e){return{intlName:"search.CONTACTS_POSSESSIVE",name:e.getValue("username")}}))}function I(n,i){var s=i.getViewer(),o;if(n[r.userId])return s&&s.signedIn&&s.nsid===n[r.userId]?e.Promise.resolve({intlName:"search.YOUR_GROUPS"}):(t.nsid(n[r.userId])?o=n[r.userId]:o={pathAlias:n[r.userId]},i.getModel("person-models",o).then(function(e){return{intlName:"search.GROUPS_POSSESSIVE",name:e.getValue("username")}}))}function q(e){e||(e={});var t=null,n=e[r.license];if(n&&n.length===1)switch(parseInt(n,10)){case 1:t="search.CC_BY_NC_SA";break;case 2:t="search.CC_BY_NC";break;case 3:t="search.CC_BY_NC_ND";break;case 4:t="search.CC_BY";break;case 5:t="search.CC_BY_SA";break;case 6:t="search.CC_BY_ND"}return t?{intlName:t}:null}function R(t,n,r){var i,s,o=this;return t===n?!0:r<=0?!1:(r=r||1,!e.Lang.isObject(t)||!e.Lang.isObject(n)?!1:(i=Object.keys(t),s=Object.keys(n),i.length!==s.length?!1:i.every(function(e){return o.objectsAreEquivalentToDepth(t[e],n[e],r-1)})))}function U(e){var t;return e&&(t=e.replace(/[\s!-\/:-@[-`]/g,"")),t}function z(e,t){if(!e||typeof e!="string")return{};var n={},i=/(["'])(\\?.)*?\1/g,s=/[,\+\s]/,o=/^([,\+]|AND|OR)$/,u=/[\+\s]OR[\+\s]/,a,f,l,c;return a=e.match(i)||[],f=e.replace(i,""),l=f.split(s),l=l.map(function(e){return e.trim()}).filter(function(e){return e&&!o.test(e)}),c=a.concat(l),n[r.tags]=c.join(","),t==="any"||t==="all"?n[r.tagMode]=t:u.test(e)?(n[r.tagMode]="any",c.length=Math.min(c.length,11)):n[r.tagMode]="all",n}var t=require("lib/helpers/type-validator"),n=["q","ss","ct","mt","l","s","w","d","m","hd","b","a","g","e","cm","xel","xeh","xal","xah","xfl","xfh","eui"],r={userId:"user_id",groupId:"group_id",groupPathAlias:"group_path_alias",setId:"set_id",page:"page",text:"text",tags:"tags",tagMode:"tag_mode",sort:"sort",safeSearch:"safe_search",contentType:"content_type",mediaType:"media",license:"license",faves:"faves",contacts:"contacts",getty:"is_getty",commons:"is_commons",marketplace:"marketplace_licensable",minTakenDate:"min_taken_date",maxTakenDate:"max_taken_date",minUploadDate:"min_upload_date",maxUploadDate:"max_upload_date",hasGeo:"has_geo",boundingBox:"bbox",accuracy:"accuracy",woeId:"woe_id",camera:"camera",minExposure:"exif_min_exposure",maxExposure:"exif_max_exposure",minAperture:"exif_min_aperture",maxAperture:"exif_max_aperture",minFocalLength:"exif_min_focallen",maxFocalLength:"exif_max_focallen",excludeUserId:"exclude_user_id",foursquareWoeId:"foursquare_woeid",foursquareVenueId:"foursquare_venueid",slideshowStartId:"jump_to",height:"height",width:"width",dimensionSearchMode:"dimension_search_mode",orientation:"orientation",colorCodes:"color_codes",styles:"styles"},i={relevant:"relevance",recent:"date-posted-desc",interesting:"interestingness-desc",name:"exact-name-match-first",activity:"most-activity",size:"most-members",oldest:"oldest-first",newest:"recent-first",oldestJoined:"age",mostPhotos:"pho",dateUploaded:"date-posted-desc",dateTaken:"date-taken-desc"},s={portrait:"portrait",square:"square",landscape:"landscape",panorama:"panorama"},o=["s","q","see","m"],u={username:"username",userId:"user_id",sort:"sort"},a=["q","s","m"],f={text:"text",sort:"sort",safeSearch:"safe_search",userId:"user_id",subscriptionTypes:"subscription_types",filterInactive:"filter_inactive_groups"},l={safe:1,all:2,eighteenPlusOnly:3},c={all:"0,1,2,3,4,5,6,7,8,9,10",cc:"1,2,3,4,5,6,9",deriv:"1,2,4,5,9,10",comm:"4,5,6,9,10",commderiv:"4,5,9,10"},h={viewAll:"view_all",viewType:"view_type",advanced:"advanced",albums:"album_search"},p=[r.tags,r.tagMode,r.mediaType,r.minTakenDate,r.maxTakenDate,r.minUploadDate,r.maxUploadDate,r.height,r.width,r.dimensionSearchMode,r.orientation,r.marketplace,r.excludeUserId],d=[r.colorCodes,r.styles],v=[r.sort,r.safeSearch,r.license],m=[r.userId,r.groupId,r.faves,r.contacts,r.commons,"m","w"],g=[r.userId,r.groupId,r.faves,r.contacts,r.safeSearch,r.sort,r.license,r.tags,r.text],y={sort:i.relevant,parse_tags:"1",content_type:"7"};e.SearchHelper={API:r,PEOPLE_SEARCH_API:u,GROUPS_SEARCH_API:f,GROUPS_SAFE_SEARCH_SETTINGS:l,API_SORT_OPTIONS:i,API_ORIENTATION_OPTIONS:s,LICENSE_TYPE:c,UNIFIED_STATE_PARAMS:h,UNIFIED_ADVANCED_PARAMS:p,UNIFIED_QUICK_FILTER_PARAMS:d,UNIFIED_TOOLBAR_PARAMS:v,SEARCH_SCOPE_PARAMS:m,UNIFIED_DEFAULT_PARAMS:y,decodeContentType:H,encodeContentType:P,isParameterlessSearch:b,mapRouteParamsToAPI:E,convertLicenseTypeValue:w,mapClassicSearchToAPI:T,mapClassicPeopleSearchToAPI:S,mapClassicGroupSearchToApi:x,mapAPIParamsToAdvancedSearchQuery:N,deriveScopeTitle:j,derivePeopleScopeTitle:F,deriveGroupsScopeTitle:I,deriveCCLicenseString:q,addParamDefaults:C,addGroupsParamDefaults:k,addPeopleParamDefaults:L,clearParams:A,clearAdvancedSearchParams:O,clearParamsExceptSearchScope:M,generateQueryString:_,convertSafeSearchPrefsToApi:B,unescapeParameters:D,objectsAreEquivalentToDepth:R,normalizeTag:U,processTags:z}},"@VERSION@",{requires:["flutil"]});
YUI.add("search-url",function(e,t){function u(e){return typeof e=="number"?e.toString():typeof e=="boolean"?e?"1":"0":typeof e=="string"?e:undefined}var n=require("lib/flog")(t),r,i,s=/^\/search(?:\/.*)?$/,o=/^bw|blackandwhite$/;YUI.Env.isServer?r=require("querystring").stringify:r=e.QueryString.stringify,i=function(t,r,s){var o,a,f,l,c;this.appContext=r;if(typeof t=="string"){c=t.split("?"),s?this.searchType=s:(a=c[0].split("/"),a[0].indexOf("http")!==-1?f=3:f=1,l="/"+a.slice(f).join("/"),this.searchType=this.getSearchTypeFromPathname(l)),c=c.length>1?c[1]:"",this.params={};if(c)try{c=e.QueryString.parse(c),this.params=e.SearchHelper.mapClassicSearchToAPI(c,r)}catch(h){n.warn("malformed query",{err:h,query:c})}}else this.params=e.merge(t),this.searchType=s;for(o in this.params)this.params.hasOwnProperty(o)&&(this.params[o]=u(this.params[o]));this.params.color_codes&&(this.colors=this.params.color_codes.toString().split(",")),this.searchType||this.setSearchType(i.searchTypes.UNDEFINED)},i.prototype.setSearchType=function(t){var n=this.getSearchTerm();return this.searchType=t,this.params=this.validateParams(this.params,this.searchType),this.params=e.merge(this.getDefaultParams(this.searchType),this.params),n&&this.setSearchTerm(n),this},i.prototype.getSearchTypeFromPathname=function(e){e=e||this.pathname,e=e.toLowerCase(),e=e.split("/").join("");switch(e){case"searchpeople":return i.searchTypes.PEOPLE;case"searchgroups":return i.searchTypes.GROUPS;case"search":default:return i.searchTypes.PHOTOS}},i.prototype.getPathname=function(){var e="/search/";switch(this.searchType){case i.searchTypes.PEOPLE:e+="people/";break;case i.searchTypes.GROUPS:e+="groups/";break;case i.searchTypes.CLASSIC_GROUPS:e="/search_groups.gne";break;case i.searchTypes.PHOTOS:default:}return e},i.prototype.validateParams=function(t,n){var r,s={},o,u;t=e.merge(t);switch(n){case i.searchTypes.PEOPLE:r=e.merge(e.SearchHelper.PEOPLE_SEARCH_API),r.text="text";break;case i.searchTypes.GROUPS:r=e.merge(e.SearchHelper.GROUPS_SEARCH_API);break;case i.searchTypes.PHOTOS:r=e.merge(e.SearchHelper.API,e.SearchHelper.UNIFIED_STATE_PARAMS);break;case i.searchTypes.UNDEFINED:default:return t}if(r)for(o in r)u=r[o],typeof t[u]!="undefined"&&(s[u]=t[u]);return s},i.prototype.getDefaultParams=function(t){var n={};switch(t){case i.searchTypes.PEOPLE:e.SearchHelper.addPeopleParamDefaults(n);break;case i.searchTypes.GROUPS:e.SearchHelper.addGroupsParamDefaults(n);break;case i.searchTypes.PHOTOS:e.SearchHelper.addParamDefaults(n);break;case i.searchTypes.UNDEFINED:default:}return n},i.prototype.getAPIParams=function(){return e.merge(this.params)},i.prototype.getAPIParam=function(e){return this.params[e]},i.prototype.setAPIParam=function(e,t){return this.params[e]=u(t),this},i.prototype.removeAPIParam=function(e){return delete this.params[e],this},i.prototype.removeAllAPIParams=function(){return this.params={},this},i.prototype.getSearchTerm=function(){var t=this.params[this.getSearchTermKey(this.searchType)];return t||(t=this.params[e.SearchHelper.API.tags]),t||""},i.prototype.setSearchTerm=function(t){var n=this.getSearchTermKey(this.searchType);return delete this.params[e.SearchHelper.PEOPLE_SEARCH_API.username],delete this.params[e.SearchHelper.GROUPS_SEARCH_API.text],delete this.params[e.SearchHelper.API.text],delete this.params[e.SearchHelper.API.tags],delete this.params.q,this.params[n]=t,this},i.prototype.getSearchTermKey=function(t){switch(t){case i.searchTypes.PEOPLE:return e.SearchHelper.PEOPLE_SEARCH_API.username;case i.searchTypes.GROUPS:return e.SearchHelper.GROUPS_SEARCH_API.text;case i.searchTypes.PHOTOS:default:return this.params[e.SearchHelper.API.tags]||this.params[e.SearchHelper.API.tags]===""?e.SearchHelper.API.tags:e.SearchHelper.API.text}},i.prototype.removeScope=function(){return e.SearchHelper.SEARCH_SCOPE_PARAMS.forEach(function(e){this.removeAPIParam(e)}.bind(this)),this.removeAPIParam(e.SearchHelper.API.excludeUserId),this},i.prototype.resetToUnified=function(){return this.params[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(this.removeAPIParam(e.SearchHelper.API.userId),this.removeAPIParam(e.SearchHelper.API.contacts),this.removeAPIParam(e.SearchHelper.API.groupId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums)),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),this},i.prototype.hasAdvancedParams=function(t){return Object.keys(this.params).some(function(n){return e.SearchHelper.UNIFIED_ADVANCED_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_QUICK_FILTER_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_TOOLBAR_PARAMS.indexOf(n)!==-1})},i.prototype.resetAdvancedParam=function(t,n){return this.hasAdvancedParams(t)?this.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced,1):n||this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced),this},i.prototype.createNewSearch=function(e){this.setSearchTerm(e),this.removeScope();if(this.searchType===i.searchTypes.UNDEFINED||this.searchType===i.searchTypes.PHOTOS)this.resetToUnified(),this.resetAdvancedParam();return this},i.prototype.getURL=function(){var e=this.getId(),t=this.getPathname();return e===i.EMPTY_SEARCH_ID?t:t+"?"+e},i.prototype.getId=function(){var t={},n,s=e.SearchHelper.API;for(n in this.params)s[n]?t[s[n]]=this.params[n]:t[n]=this.params[n];return r(t)||i.EMPTY_SEARCH_ID},i.prototype.clone=function(){var e=new i(this.params,this.appContext,this.searchType);return e},i.prototype.setMedia=function(t,n){var r;t||(t=!1),n||(n=!1),t&&n?r="all":t?r="photos":r="videos",this.setAPIParam(e.SearchHelper.API.mediaType,r)},i.prototype._syncColors=function(){this.colors&&this.colors.length>0?this.params.color_codes=this.colors.join(","):this.removeAPIParam("color_codes")},i.prototype.addColorCode=function(e){if(e&&e.match(o)){this.clearColorCodes(),this.colors=["bw"],this._syncColors();return}this.colors&&this.colors.indexOf("bw")!==-1&&(this.colors=[]),this.colors||(this.colors=[]),this.colors.indexOf(e)===-1&&(this.colors
.push(e),this._syncColors())},i.prototype.removeColorCode=function(e){var t;this.colors&&(t=this.colors.indexOf(e),t!==-1&&(this.colors.splice(t,1),this._syncColors()))},i.prototype.clearColorCodes=function(){this.colors=[],this._syncColors()},i.isSearchUrl=function(e){return s.test(e)},i.searchTypes={UNDEFINED:0,PHOTOS:1,PEOPLE:2,GROUPS:3,CLASSIC_GROUPS:4},i.EMPTY_SEARCH_ID="-1",e.SearchUrl=i},"@VERSION@",{requires:["search-helper","querystring-parse-simple","querystring-stringify-simple"]});
YUI.add("hermes-template-search-pill",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<li class="search-pill" '+((s=n["if"].call(u,t!=null?t.id:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+f((n.truncate||t&&t.truncate||a).call(u,t!=null?t.name:t,20,{name:"truncate",hash:{},data:i}))+'<div class="search-pill-divider"></div>'+f((o=(o=n.secondName||(t!=null?t.secondName:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"secondName",hash:{},data:i}):o))+'<i class="search-pill-remover"></i></li>\n'},2:function(e,t,n,r,i){var s;return"id="+e.escapeExpression((s=(s=n.id||(t!=null?t.id:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"id",hash:{},data:i}):s))},4:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<li class="search-pill" '+((s=n["if"].call(o,t!=null?t.id:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+e.escapeExpression((n.truncate||t&&t.truncate||n.helperMissing).call(o,t!=null?t.name:t,30,{name:"truncate",hash:{},data:i}))+'<i class="search-pill-remover"></i></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.combo:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-search-autosuggest-field",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=e.invokePartial(r["search-pill"],t,{name:"search-pill",data:i,indent:"			",helpers:n,partials:r,decorators:e.decorators}))!=null?s:""},3:function(e,t,n,r,i){return' placeholder="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"},data:i}))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u,a=t!=null?t:{},f=n.helperMissing,l=e.escapeExpression,c="function",h='<form method="get" action="/search/" role="search" class="search-form">\n\n		<label data-track="gnSearchSearchIcon" aria-label="'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:i}))+'">\n			<svg class="search-icon" style="width: 22px; height: 22px;" data-track="gnSearchSearchIcon" aria-label="'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:i}))+'"><use xlink:href="#icon-search"></use></svg>\n			<input type="submit" data-track="gnSearchSearchIcon" class="search-icon-button" tabindex="-1" aria-label="'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:i}))+'" role="button">\n		</label>\n		<ul class="search-pillbox">\n';return s=(o=(o=n.pills||(t!=null?t.pills:t))!=null?o:f,u={name:"pills",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i},typeof o===c?o.call(a,u):o),n.pills||(s=n.blockHelperMissing.call(t,s,u)),s!=null&&(h+=s),h+'		</ul>\n		<input type="text" id="search-field" class="autosuggest-selectable-item"'+((s=n.unless.call(a,t!=null?t.hasPills:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+' name="text" value="'+l((o=(o=n.searchTerm||(t!=null?t.searchTerm:t))!=null?o:f,typeof o===c?o.call(a,{name:"searchTerm",hash:{},data:i}):o))+'" autocomplete="off" aria-label="'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:i}))+'" role="textbox">\n\n</form>\n\n'+l((n.outlet||t&&t.outlet||f).call(a,t!=null?t["search-autosuggest-items-list-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},usePartial:!0,useData:!0}),r={};e.Array.each(["search-pill"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-field",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-search-pill"]});
YUI.add("hermes-lang-autosuggest_fr-fr",function(e,t){e.Intl.add("hermes/autosuggest","fr-FR",{MEMBER:["1 membre"],MEMBERS:[{type:"number",valueName:"count"}," membres"],SEARCH_PEOPLE:["Rechercher des personnes"],SEARCH_GROUPS:["Recherchez des groupes"],SEARCH_PHOTOS:["Rechercher des photos"],MORE:["Plus"],MORE_SEARCH_TYPES:["Autres types de recherche"],MORE_OPTIONS:["Autres options"],SEARCH_YOUR_PHOTOS:["Rechercher dans vos photos"],SEARCH_EVERYONES_PHOTOS:["Rechercher les photos de tout le monde"],SEARCH_CONTACTS_PHOTOS:["Rechercher les photos de vos contacts"],YOUR_PHOTOS:["Vos photos"],EVERYONES_PHOTOS:["Photos de tout le monde"],YOUR_CONTACTS_PHOTOS:["Photos de vos contacts"],SEARCH_USER_PHOTOS:["Rechercher dans les photos de ","${name}"],SEARCH_GROUP_PHOTOS:["Rechercher des photos dans ","${name}"],YOUR_PHOTOSTREAM:["Votre galerie"],YOUR_ALBUMS:["Vos albums"],SETS:["Albums"],CAMERA_ROLL:["Pellicule"],ORGANIZE:["Organisez"],YOUR_COLLECTIONS:["Vos classeurs"],YOUR_GALLERIES:["Vos expos"],YOUR_ARCHIVES:["Vos archives"],YOUR_TAGS:["Vos tags"],YOUR_MAP:["Votre carte"],YOUR_FAVORITES:["Vos favoris"],YOUR_STATS:["Vos statistiques"],GRAPHS:["Graphiques"],REFERRERS:["R\u00e9f\u00e9rents"],VIEWS:["Vues"],YOUR_APPS:["Vos applis"],RECENT_ACTIVITY:["Activit\u00e9 r\u00e9cente"],PHOTOS_OF_YOU:["Photos de vous"],UPLOAD_PHOTOS:["Importer des photos"],YOUR_ACCOUNT:["Votre compte"],SETTINGS:["Param\u00e8tres"],PREFERENCES:["Pr\u00e9f\u00e9rences"],YOUR_PROFILE:["Votre profil"],FLICKR_MAIL:["Mail Flickr"],ORGANIZR:["Organizr"],CREATE:["Cr\u00e9ez"],WALL_ART:["D\u00e9coration murale"],PHOTO_BOOKS:["Albums photo"],CURATED_COLLECTION:["Collection de nos \u00e9diteurs"],PHOTOS_OF_YOUR_CONTACTS:["Photos de vos contacts"],FOLLOWING:["Abonn\u00e9"],CONTACTS_LIST:["Liste des contacts"],FOLLOWERS:["Abonn\u00e9s"],FIND_YOUR_FRIENDS:["Rechercher vos amis"],INVITE_YOUR_FRIENDS:["Inviter vos amis"],INVITE_HISTORY:["Historique des invitations"],GUEST_PASS_HISTORY:["Historique des passes Invit\u00e9"],YOUR_GROUPS:["Vos groupes"],RECENT_GROUP_DISCUSSIONS:["Discussions de groupe r\u00e9centes"],CREATE_A_GROUP:["Cr\u00e9er un groupe"],EXPLORE:["Explorez"],POPULAR_TAGS:["Tags populaires"],GALLERIES:["Expos"],ANALOG:["Analogique"],FILM:["Film"],WORLD_MAP:["Carte mondiale"],PLACES:["Lieux"],THE_COMMONS:["The Commons"],CREATIVE_COMMONS:["Creative Commons"],CC:["Cc"],LICENSE:["Licence"],THE_FLICKR_BLOG:["Blog Flickr"],THE_FLICKR_CODE_BLOG:["Blog Flickr\u00a0Code"],THE_APP_GARDEN:["App\u00a0Garden"],CAMERA_FINDER:["Recherche d'appareil photo"],DEVELOPER_GUIDE:["Guide du d\u00e9veloppeur"],API:["API"],PROGRAMMING:["Programmation"],CODE:["Code"],DOCUMENTATION:["Documentation"],DEVELOPER:["D\u00e9veloppeur"],API_DOCUMENTATION:["Documentation sur l'API"],FEEDS:["Flux"],RSS:["RSS"],ATOM:["Atom"],DATA:["Donn\u00e9es"],HELP:["Aide"],COMMUNITY_GUIDELINES:["Charte d\u2019utilisation"],HELP_FORUM:["Forum d\u2019aide"],FAQ:["FAQ"],FREQUENTLY_ASKED_QUESTIONS:["Foire aux questions (FAQ)"],TOOLS:["Outils"],UPLOAD:["Importez"],MAC:["Mac"],WINDOWS:["Windows"],ABOUT_FLICKR:["\u00c0 propos de Flickr"],STAFF:["Personnel"],JOBS_AT_FLICKR:["Carri\u00e8res chez Flickr"],CAREER:["Carri\u00e8res"],TWENTY_UNDER_TWENTY:["20 Under 20"],ME:["Moi"],FLICKR_MARKETPLACE:["Flickr\u00a0Marketplace"]})},"@VERSION@",{requires:["intl"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-data-accentfold",function(e,t){e.namespace("Text.Data").AccentFold={0:/[\u2070\u2080\u24EA\uFF10]/gi,1:/[\u00B9\u2081\u2460\uFF11]/gi,2:/[\u00B2\u2082\u2461\uFF12]/gi,3:/[\u00B3\u2083\u2462\uFF13]/gi,4:/[\u2074\u2084\u2463\uFF14]/gi,5:/[\u2075\u2085\u2464\uFF15]/gi,6:/[\u2076\u2086\u2465\uFF16]/gi,7:/[\u2077\u2087\u2466\uFF17]/gi,8:/[\u2078\u2088\u2467\uFF18]/gi,9:/[\u2079\u2089\u2468\uFF19]/gi,a:/[\u00AA\u00E0-\u00E5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u1D43\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\uFF41]/gi,b:/[\u1D47\u1E03\u1E05\u1E07\u24D1\uFF42]/gi,c:/[\u00E7\u0107\u0109\u010B\u010D\u1D9C\u1E09\u24D2\uFF43]/gi,d:/[\u010F\u1D48\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u217E\u24D3\uFF44]/gi,e:/[\u00E8-\u00EB\u0113\u0115\u0117\u0119\u011B\u0205\u0207\u0229\u1D49\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u2091\u212F\u24D4\uFF45]/gi,f:/[\u1DA0\u1E1F\u24D5\uFF46]/gi,g:/[\u011D\u011F\u0121\u0123\u01E7\u01F5\u1D4D\u1E21\u210A\u24D6\uFF47]/gi,h:/[\u0125\u021F\u02B0\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u210E\u24D7\uFF48]/gi,i:/[\u00EC-\u00EF\u0129\u012B\u012D\u012F\u0133\u01D0\u0209\u020B\u1D62\u1E2D\u1E2F\u1EC9\u1ECB\u2071\u2139\u2170\u24D8\uFF49]/gi,j:/[\u0135\u01F0\u02B2\u24D9\u2C7C\uFF4A]/gi,k:/[\u0137\u01E9\u1D4F\u1E31\u1E33\u1E35\u24DA\uFF4B]/gi,l:/[\u013A\u013C\u013E\u0140\u01C9\u02E1\u1E37\u1E39\u1E3B\u1E3D\u2113\u217C\u24DB\uFF4C]/gi,m:/[\u1D50\u1E3F\u1E41\u1E43\u217F\u24DC\uFF4D]/gi,n:/[\u00F1\u0144\u0146\u0148\u01F9\u1E45\u1E47\u1E49\u1E4B\u207F\u24DD\uFF4E]/gi,o:/[\u00BA\u00F2-\u00F6\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u020D\u020F\u022B\u022D\u022F\u0231\u1D52\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u2092\u2134\u24DE\uFF4F]/gi,p:/[\u1D56\u1E55\u1E57\u24DF\uFF50]/gi,q:/[\u02A0\u24E0\uFF51]/gi,r:/[\u0155\u0157\u0159\u0211\u0213\u02B3\u1D63\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uFF52]/gi,s:/[\u015B\u015D\u015F\u0161\u017F\u0219\u02E2\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uFF53]/gi,t:/[\u0163\u0165\u021B\u1D57\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\uFF54]/gi,u:/[\u00F9-\u00FC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u1D58\u1D64\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55]/gi,v:/[\u1D5B\u1D65\u1E7D\u1E7F\u2174\u24E5\uFF56]/gi,w:/[\u0175\u02B7\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\uFF57]/gi,x:/[\u02E3\u1E8B\u1E8D\u2093\u2179\u24E7\uFF58]/gi,y:/[\u00FD\u00FF\u0177\u0233\u02B8\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u24E8\uFF59]/gi,z:/[\u017A\u017C\u017E\u1DBB\u1E91\u1E93\u1E95\u24E9\uFF5A]/gi}},"3.16.0",{requires:["yui-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("text-accentfold",function(e,t){var n=e.Array,r=e.Text,i=r.Data.AccentFold,s={canFold:function(e){var t;for(t in i)if(i.hasOwnProperty(t)&&e.search(i[t])!==-1)return!0;return!1},compare:function(e,t,n){var r=s.fold(e),i=s.fold(t);return n?!!n(r,i):r===i},filter:function(e,t){return n.filter(e,function(e){return t(s.fold(e))})},fold:function(t){return e.Lang.isArray(t)?n.map(t,s.fold):(t=t.toLowerCase(),e.Object.each(i,function(e,n){t=t.replace(e,n)}),t)}};r.AccentFold=s},"3.16.0",{requires:["array-extras","text-data-accentfold"]});
YUI.add("autosuggest-context-results-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,langBundles:this.details.langBundles,TAG_ITEM_TYPE:0,PERSON_ITEM_TYPE:1,GROUP_ITEM_TYPE:2,PAGE_ITEM_TYPE:3,processItem:function(t,n){var r;t.type=n,t.titleIntlKey&&(t.title=this.intlMessage({intlName:t.titleIntlKey}));if(t.aliasIntlKeys){t.aliases=t.aliases||[];for(r=0;r<t.aliasIntlKeys.length;r++)t.aliases.push(this.intlMessage({intlName:t.aliasIntlKeys[r]}))}return n===this.TAG_ITEM_TYPE||n===this.PAGE_ITEM_TYPE?t.key=t.title:t.key=t.nsid,t.matches&&(t.matches=t.matches.map(function(t){return t.token=e.Text.AccentFold.fold(t.token),t})),t},remote:{read:function(t){return e.ModelFetchers["flickr-autosuggest-getContextResults-fetcher"].run(t,this.appContext)}},attributes:{contextId:{writeOnce:"initOnly"},contextType:{writeOnce:"initOnly"},tags:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.TAG_ITEM_TYPE);return e}},people:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.PERSON_ITEM_TYPE);return e}},groups:{setter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.GROUP_ITEM_TYPE);return e}},pages:{readOnly:!0,getter:function(e){var t,n;for(t=0,n=e.length;t<n;t++)this.processItem(e[t],this.PAGE_ITEM_TYPE);return e},defaultValue:[{url:"/photos/me/",titleIntlKey:"autosuggest.YOUR_PHOTOSTREAM",aliasIntlKeys:["autosuggest.ME"]},{url:"/me/albums/",titleIntlKey:"autosuggest.YOUR_ALBUMS",aliasIntlKeys:["autosuggest.SETS"]},{url:"/photos/me/collections/",titleIntlKey:"autosuggest.YOUR_COLLECTIONS",aliasIntlKeys:[]},{url:"/photos/me/galleries/",titleIntlKey:"autosuggest.YOUR_GALLERIES",aliasIntlKeys:[]},{url:"/photos/me/archives/",titleIntlKey:"autosuggest.YOUR_ARCHIVES",aliasIntlKeys:[]},{url:"/photos/me/tags/",titleIntlKey:"autosuggest.YOUR_TAGS",aliasIntlKeys:[]},{url:"/photos/me/map/",titleIntlKey:"autosuggest.YOUR_MAP",aliasIntlKeys:[]},{url:"/me/favorites/",titleIntlKey:"autosuggest.YOUR_FAVORITES",aliasIntlKeys:[]},{url:"/photos/me/stats/",titleIntlKey:"autosuggest.YOUR_STATS",aliasIntlKeys:["autosuggest.GRAPHS","autosuggest.REFERRERS","autosuggest.VIEWS"]},{url:"/services/apps/by/me/",titleIntlKey:"autosuggest.YOUR_APPS",aliasIntlKeys:[]},{url:"/activity/",titleIntlKey:"autosuggest.RECENT_ACTIVITY",aliasIntlKeys:[]},{url:"/photosof/me/",titleIntlKey:"autosuggest.PHOTOS_OF_YOU",aliasIntlKeys:["autosuggest.ME"]},{url:"/photos/upload/",titleIntlKey:"autosuggest.UPLOAD_PHOTOS",aliasIntlKeys:[]},{url:"/account/",titleIntlKey:"autosuggest.YOUR_ACCOUNT",aliasIntlKeys:["autosuggest.SETTINGS","autosuggest.PREFERENCES"]},{url:"/people/me/",titleIntlKey:"autosuggest.YOUR_PROFILE",aliasIntlKeys:["autosuggest.ME"]},{url:"/photos/organize/",titleIntlKey:"autosuggest.ORGANIZR",aliasIntlKeys:[]},{url:"/photos/contacts/",titleIntlKey:"autosuggest.YOUR_CONTACTS_PHOTOS",aliasIntlKeys:[]},{url:"/photosof/contacts/",titleIntlKey:"autosuggest.PHOTOS_OF_YOUR_CONTACTS",aliasIntlKeys:[]},{url:"/people/me/contacts/",titleIntlKey:"autosuggest.FOLLOWING",aliasIntlKeys:["autosuggest.CONTACTS_LIST"]},{url:"/people/me/contacts/rev/",titleIntlKey:"autosuggest.FOLLOWERS",aliasIntlKeys:[]},{url:"/import/people/",titleIntlKey:"autosuggest.FIND_YOUR_FRIENDS",aliasIntlKeys:[]},{url:"/invite/",titleIntlKey:"autosuggest.INVITE_YOUR_FRIENDS",aliasIntlKeys:[]},{url:"/invite/history/",titleIntlKey:"autosuggest.INVITE_HISTORY",aliasIntlKeys:[]},{url:"/invite/history/guests/",titleIntlKey:"autosuggest.GUEST_PASS_HISTORY",aliasIntlKeys:[]},{url:"/groups/",titleIntlKey:"autosuggest.YOUR_GROUPS",aliasIntlKeys:[]},{url:"/recent.gne/",titleIntlKey:"autosuggest.RECENT_GROUP_DISCUSSIONS",aliasIntlKeys:[]},{url:"/group_create.gne/",titleIntlKey:"autosuggest.CREATE_A_GROUP",aliasIntlKeys:[]},{url:"/explore/",titleIntlKey:"autosuggest.EXPLORE",aliasIntlKeys:[]},{url:"/photos/tags/",titleIntlKey:"autosuggest.POPULAR_TAGS",aliasIntlKeys:[]},{url:"/galleries/",titleIntlKey:"autosuggest.GALLERIES",aliasIntlKeys:[]},{url:"/analog/",titleIntlKey:"autosuggest.ANALOG",aliasIntlKeys:["autosuggest.FILM"]},{url:"/map/",titleIntlKey:"autosuggest.WORLD_MAP",aliasIntlKeys:[]},{url:"/places/",titleIntlKey:"autosuggest.PLACES",aliasIntlKeys:[]},{url:"/marketplace/",titleIntlKey:"autosuggest.FLICKR_MARKETPLACE",aliasIntlKeys:[]},{url:"/commons/",titleIntlKey:"autosuggest.THE_COMMONS",aliasIntlKeys:[]},{url:"/creativecommons/",titleIntlKey:"autosuggest.CREATIVE_COMMONS",aliasIntlKeys:["autosuggest.CC","autosuggest.LICENSE"]},{url:"/services/",titleIntlKey:"autosuggest.THE_APP_GARDEN",aliasIntlKeys:[]},{url:"/cameras/",titleIntlKey:"autosuggest.CAMERA_FINDER",aliasIntlKeys:[]},{url:"/services/api/",titleIntlKey:"autosuggest.API_DOCUMENTATION",aliasIntlKeys:["autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DEVELOPER"]},{url:"/services/developer/",titleIntlKey:"autosuggest.DEVELOPER_GUIDE",aliasIntlKeys:["autosuggest.API","autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DOCUMENTATION"]},{url:"/services/feeds/",titleIntlKey:"autosuggest.FEEDS",aliasIntlKeys:["autosuggest.RSS","autosuggest.ATOM","autosuggest.DATA"]},{url:"/help/",titleIntlKey:"autosuggest.HELP",aliasIntlKeys:[]},{url:"/help/guidelines/",titleIntlKey:"autosuggest.COMMUNITY_GUIDELINES",aliasIntlKeys:[]},{url:"/help/forum/",titleIntlKey:"autosuggest.HELP_FORUM",aliasIntlKeys:[]},{url:"/tools/",titleIntlKey:"autosuggest.TOOLS",aliasIntlKeys:["autosuggest.UPLOAD","autosuggest.MAC","autosuggest.WINDOWS"]},{url:"/about/",titleIntlKey:"autosuggest.ABOUT_FLICKR",aliasIntlKeys:["autosuggest.STAFF"]},{url:"/mail/",titleIntlKey:"autosuggest.FLICKR_MAIL",aliasIntlKeys:[]},{url:"/create/",titleIntlKey:"autosuggest.CREATE",aliasIntlKeys:["autosuggest.WALL_ART","autosuggest.PHOTO_BOOKS"]},{url:"/create/curatedcollection/",titleIntlKey:"autosuggest.CURATED_COLLECTION",aliasIntlKeys:[]},{url:"/cameraroll/",titleIntlKey:"autosuggest.CAMERA_ROLL"
,aliasIntlKeys:["autosuggest.ORGANIZE"]},{url:"/20under20/",titleIntlKey:"autosuggest.TWENTY_UNDER_TWENTY",aliasIntlKeys:[]},{url:"http://blog.flickr.net",titleIntlKey:"autosuggest.THE_FLICKR_BLOG",aliasIntlKeys:[]},{url:"http://code.flickr.net",titleIntlKey:"autosuggest.THE_FLICKR_CODE_BLOG",aliasIntlKeys:["autosuggest.API","autosuggest.PROGRAMMING","autosuggest.CODE","autosuggest.DEVELOPER"]},{url:"/jobs/",titleIntlKey:"autosuggest.JOBS_AT_FLICKR",aliasIntlKeys:["autosuggest.CAREER"]}]}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-autosuggest-getContextResults-fetcher","text-accentfold"],langBundles:["autosuggest"]});
YUI.add("flickr-autosuggest-getContextResults-fetcher",function(e,t){"use strict";function n(t){var n=t.id.split("_"),r={extras:e.APIHelper.request.getRebootPhotoExtras(),context_id:n[0],context_type:n[1]};return r}function r(e,t){var n=e[0],r=e[1],i;i={id:t.id,contextId:t.context_id,contextType:t.context_type,tags:n.results.tags||[],people:n.results.people||[],groups:n.results.groups||[]};if(!n.results)throw new Error("No `results` property returned by API.");return r.add(i)}function i(n,r){var i=this,s="flickr.autosuggest.getContextResults",o=this._processParams(n);return e.Promise.all([r.callAPI(s,o),r.getModelRegistry("autosuggest-context-results-models")]).then(function(t){return i._processResponse(t,e.merge(o,n))},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-autosuggest-getContextResults-fetcher"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["autosuggest-context-results-models"]});
YUI.add("hermes-template-search-autosuggest-list-item",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" header"},3:function(e,t,n,r,i){return" empty"},5:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return" autosuggest-selectable-item"+((s=n["if"].call(u,t!=null?t.selected:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-track="autosuggestNavigate_'+l((o=(o=n.rapidType||(t!=null?t.rapidType:t))!=null?o:a,typeof o===f?o.call(u,{name:"rapidType",hash:{},data:i}):o))+'" data-href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'"'+((s=n["if"].call(u,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+' tabindex="0"'},6:function(e,t,n,r,i){return" selected"},8:function(e,t,n,r,i){var s;return' data-title="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'"'},10:function(e,t,n,r,i){return'"'},12:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{};return'<span class="item-icon"><span class="avatar tiny no-menu '+u(o((s=t!=null?t.avatar:t)!=null?s.type:s,t))+'" title="'+u(o((s=t!=null?t.avatar:t)!=null?s.title:s,t))+'"'+((s=n["if"].call(a,(s=t!=null?t.avatar:t)!=null?s.groupNsid:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(a,(s=t!=null?t.avatar:t)!=null?s.personNsid:s,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+' style="background-image: url('+u(o((s=t!=null?t.avatar:t)!=null?s.url:s,t))+');"></span></span>'},13:function(e,t,n,r,i){var s;return' data-group-nsid="'+e.escapeExpression(e.lambda((s=t!=null?t.avatar:t)!=null?s.groupNsid:s,t))+'"'},15:function(e,t,n,r,i){var s;return' data-person-nsid="'+e.escapeExpression(e.lambda((s=t!=null?t.avatar:t)!=null?s.personNsid:s,t))+'"'},17:function(e,t,n,r,i){var s;return'<span class="item-icon"><span class="'+e.escapeExpression((s=(s=n.iconClass||(t!=null?t.iconClass:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"iconClass",hash:{},data:i}):s))+'"></span></span>'},19:function(e,t,n,r,i){return'<span class="item-icon"></span>'},21:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<span class="item-title'+((s=n["if"].call(o,t!=null?t.header:t,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">'+((s=(n.multiHighlightString||t&&t.multiHighlightString||n.helperMissing).call(o,t!=null?t.title:t,t!=null?t.titleHighlights:t,"highlight",{name:"multiHighlightString",hash:{},data:i}))!=null?s:"")+"</span>"},22:function(e,t,n,r,i){return" tertiary"},24:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<span class="item-subtitle '+((s=n["if"].call(o,t!=null?t.header:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.program(27,i,0),data:i}))!=null?s:"")+'">'+((s=n.unless.call(o,t!=null?t.header:t,{name:"unless",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.multiHighlightString||t&&t.multiHighlightString||n.helperMissing).call(o,t!=null?t.subtitle:t,t!=null?t.subtitleHighlights:t,"highlight",{name:"multiHighlightString",hash:{},data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.header:t,{name:"unless",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</span>"},25:function(e,t,n,r,i){return"link"},27:function(e,t,n,r,i){return"tertiary"},29:function(e,t,n,r,i){return"("},31:function(e,t,n,r,i){return")"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="autosuggest-item'+((s=n["if"].call(o,t!=null?t.header:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.empty:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:"")+">\n	"+((s=n["if"].call(o,t!=null?t.avatar:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+((s=n["if"].call(o,t!=null?t.iconClass:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+((s=n["if"].call(o,t!=null?t.useIconPlaceholder:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+((s=n["if"].call(o,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+((s=n["if"].call(o,t!=null?t.subtitle:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-list-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-search-autosuggest-items-list",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'		<li class="autosuggest-list-elem" role="menuitem">'+((s=e.invokePartial(r["search-autosuggest-list-item"],t,{name:"search-autosuggest-list-item",data:i,helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<ul class="autosuggest-items-list" role="menu">\n'+((s=n.each.call(t!=null?t:{},t!=null?t.autosuggestItems:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</ul>\n"},usePartial:!0,useData:!0}),r={};e.Array.each(["search-autosuggest-list-item"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-autosuggest-items-list",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-search-autosuggest-list-item"]});
YUI.add("autosuggest-data-manager",function(e){function n(e){return e.trim().split(/\s+/)}function r(t){var n=t.replace(/[\W,_]/g,"").toLowerCase();return e.fluid.removeDiacritics(n)}function i(e){var t="",n=e.split(""),r,i;for(i=0,r=n.length;i<r-1;i++)t+=n[i]+"[\\W,_]*";return t+=n[r-1],t}var t;t=e.AutosuggestDataManager=function(e){e=e||{},e.prefixTrie?this.prefixTrie=e.prefixTrie:this._buildPrefixTrie(e.items)},t.locateQuery=function(e,t){var s=[],o,u,a={},f,l,c,h,p,d;if(!e||!t)return[];o=n(e);for(d=0,u=o.length;d<u;d++)f=r(o[d]),a[f]||(l=i(f),c=new RegExp("(\\b|_)("+l+")","i"),h=c.exec(t),h&&(p=h.index+h[1].length,s.push({start:p,end:p+h[2].length})),a[f]=!0);return s},t.deserialize=function(e){return new t({prefixTrie:JSON.parse(e)})},t.prototype={add:function(e){function f(i){var l,c,h,p,d,v,m,g,y,b,w;for(l=0,c=i.length;l<c;l++){h=i[l],d=[],h.title&&(d=d.concat(n(h.title))),h.subtitle&&(d=d.concat(n(h.subtitle)));if(h.aliases)for(w=0,p=h.aliases.length;w<p;w++)d=d.concat(n(h.aliases[w]));for(w=0,v=d.length;w<v;w++){m=d[w],g=t.prefixTrie,y=r(m).split("");while(b=y.shift())g.children[b]=g.children[b]||t._newTrieNode(),g=g.children[b],g.itemKeys[h.key]||(g.items.push(h),g.itemKeys[h.key]=!0)}}o<s&&(s>o+u?a=o+u:a=s,i=e.slice(o,a),o=a,setTimeout(function(){f(i)},0))}var t=this,i,s,o,u=250,a;o=0,s=e.length,s>o+u?a=o+u:a=s,i=e.slice(o,a),o=a,f(i)},query:function(e){var t=this,i,s,o,u,a,f;return e?(i=n(e),i.every(function(e){s=t.prefixTrie,o=r(e).split("");if(!o.length)return!0;while(s&&(f=o.shift()))s=s.children[f];return!s||o.length!==0?(a=[],!1):(u=s.items.slice(),a=a?t._intersectMatches(a,u):u,a&&a.length===0?!1:!0)}),a||[]):[]},serialize:function(){return JSON.stringify(this.prefixTrie)},_buildPrefixTrie:function(e){this.prefixTrie=this._newTrieNode(),e&&this.add(e)},_newTrieNode:function(){return{items:[],itemKeys:{},children:{}}},_intersectMatches:function(e,t){return e.filter(function(e){return t.some(function(t){return t.key===e.key})})}}},"@VERSION@",{requires:[],optionalRequires:["fluid"]});
YUI.add("search-autosuggest-items-list-view",function(e,t){var n=require("lib/flog")(t),r=[{key:"photos",headerTemplate:{titleIntlKey:"search.PHOTOS",searchLink:{textIntlKey:"search.SEARCH_PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS,rapidType:"searchPhotos",iconClass:"icon-photos"}}},{key:"people",headerTemplate:{titleIntlKey:"search.PEOPLE",searchLink:{textIntlKey:"search.SEARCH_PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE,rapidType:"searchPeople",iconClass:"icon-people"}}},{key:"groups",headerTemplate:{titleIntlKey:"search.GROUPS",searchLink:{textIntlKey:"search.SEARCH_GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS,rapidType:"searchGroups",iconClass:"icon-groups"}}},{key:"pages"}],i=3;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("autosuggestItems",t.autosuggestItems||{}),this.set("searchUrl",new e.SearchUrl(this.appContext.getLocation().href,this.appContext)),this.set("searchQuery",""),this},loadState:function(){var e=this.appContext.getViewer().signedIn?this.appContext.getViewer().nsid+"_user":"global_global",t=this;return this.appContext.getModel("autosuggest-context-results-models",{id:e}).then(function(e){e&&(t.processTimeout=setTimeout(function(){t.processAutosuggestModels(e)},1e3))},function(t){n.warn("error loading autosuggest data",{modelId:e})})},processAutosuggestModels:function(t){var n={};t&&t.getValue("pages").length&&(n.pages=new e.AutosuggestDataManager({items:t.getValue("pages")})),t&&t.getValue("people").length&&(n.people=new e.AutosuggestDataManager({items:t.getValue("people")})),t&&t.getValue("groups").length&&(n.groups=new e.AutosuggestDataManager({items:t.getValue("groups")})),this.set("autosuggestDataManagers",n)},updateAutosuggestItems:function(e){var t=this.get("autosuggestDataManagers"),n={},r;r=function(e,t){return e.score&&t.score?t.score-e.score:0},e&&t&&(t.pages&&(n.pages=t.pages.query(e).sort(r)),t.people&&(n.people=t.people.query(e).sort(r)),t.groups&&(n.groups=t.groups.query(e).sort(r))),this.set("autosuggestItems",n||{}),this.set("searchQuery",e||""),this.set("previouslySelectedNode",null),this.buildContainer()},buildContainer:function(){return this.assembleAutosuggestItemsList(),this.setContainerWithTemplate("search-autosuggest-items-list",{autosuggestItems:this.get("autosuggestItemsList")}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("blur",this.handleAutosuggestListItemBlur.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("click",this.handleAutosuggestListItemClick.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("mouseenter",this.handleAutosuggestListItemHoverOn.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("keydown",this.handleAutosuggestListItemKeydown.bind(this),".autosuggest-selectable-item")),this},onParentViewEvent:function(e,t){var n=t&&t.length&&t[0];switch(n){case"update-autosuggest-items":this.updateAutosuggestItems(t[1],t[2]);break;case"enable-autosuggest":this.get("container").removeClass("disabled");break;case"disable-autosuggest":this.get("container").addClass("disabled");break;case"autosuggest-keyboard-nav":t[1]&&this.doKeyboardNav(t[1],!0)}},assembleAutosuggestItemsList:function(){var e=[],t=this.get("autosuggestItems")||{},n=this.get("searchQuery")||"",s,o,u;if(n)for(o=0;o<r.length;o++){s=r[o];if(t.hasOwnProperty(s.key)&&t[s.key].length){e.push(this.buildSectionHeaderItem(s.headerTemplate,n,!0));for(u=0;u<Math.min(i,t[s.key].length);u++)e.push(this.buildAutosuggestListItem(t[s.key][u],s.key,n))}else s.headerTemplate&&e.push(this.buildSectionHeaderItem(s.headerTemplate,n,!1))}e.length?(e[0].selected=!0,this.fire("subviewViewEvent","autosuggest-has-items")):this.fire("subviewViewEvent","autosuggest-no-items"),this.set("autosuggestItemsList",e)},buildSectionHeaderItem:function(e,t,n){var r={header:!0};return e?(r.iconClass="icon-search",e.searchLink&&(r.subtitle=this.intlMessage({intlName:e.searchLink.textIntlKey}),r.url=this.get("searchUrl").clone().createNewSearch(t).setSearchType(e.searchLink.searchType).getURL(),r.iconClass=e.searchLink.iconClass,r.rapidType=e.searchLink.rapidType)):r.empty=!0,r},buildAutosuggestListItem:function(t,n,r){var i={item:!0},s,o;return i.title=t.title||"",i.subtitle=t.subtitle||"",i.rapidType=n,i.titleHighlights=e.AutosuggestDataManager.locateQuery(r,i.title),i.subtitleHighlights=e.AutosuggestDataManager.locateQuery(r,i.subtitle),n==="pages"?(i.url=t.url||"",i.iconClass="icon-docs"):(s=n==="groups"?"groups":"photos",o=t.pathalias||t.nsid,o&&(i.url="/"+s+"/"+o),t.nsid&&(t.iconserver||t.iconserver===0)&&(i.avatar={type:n==="groups"?"group":"person",title:i.title,url:e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver),personNsid:n==="people"?t.nsid:!1,groupNsid:n==="groups"?t.nsid:!1})),i},handleAutosuggestListItemBlur:function(t){var n,r=this;setTimeout(function(){n=e.one(e.config.doc.activeElement),n.hasClass("autosuggest-selectable-item")||r.fire("subviewViewEvent","autosuggest-lost-all-focus")},25)},handleAutosuggestListItemClick:function(e){this.navigateFromAutosuggestListNode(e.currentTarget)},handleAutosuggestListItemKeydown:function(t){var n="";t.halt();if(t.altKey===!0)e.fire("transfer-to-gn-search",n);else if(t.keyCode>=48&&t.keyCode<=90)n=String.fromCharCode(t.keyCode),t.shiftKey===!0?n=n.toUpperCase():n=n.toLowerCase(),e.fire("transfer-to-gn-search",n);else switch(t.keyCode){case 8:this.fire("subviewViewEvent","backspace-focus");break;case 13:this.navigateFromAutosuggestListNode(t.target);break;case 27:this.blurAllAutosuggestListNodes();break;case 38:this.doKeyboardNav("up",!1);break;case 40:this.doKeyboardNav("down",!1)}},navigateFromAutosuggestListNode:function(t){var n,r,i;t&&(n=t.getData("href"),r=t.getData("title"),i=t.getData("track")),r&&this.fire("subviewViewEvent","autosuggest-update-field",r),n&&
(e.rapidTracker.beacon(this.name,i),this.updateAutosuggestItems(),this.appContext.flapp.navigate(n))},blurAllAutosuggestListNodes:function(){var e=this.get("container").all(".autosuggest-selectable-item"),t=e?e.size():0;if(!t)return;e.each(function(e){e.blur()})},doKeyboardNav:function(e,t){var n=this.get("container").all(".autosuggest-selectable-item"),r=n?n.size():0,i=-1,s;if(!r)return;s=this.get("container").one(".autosuggest-selectable-item.selected"),s&&(i=n.indexOf(s)),n.removeClass("selected"),i=e==="up"?i-1:i+1,i>=0&&i<r?(s=n.item(i),s.addClass("selected"),s.focus()):t?(i=i<0?r-1:0,s=n.item(i),s.addClass("selected"),s.focus()):this.fire("subviewViewEvent","focus-search-field")},handleAutosuggestListItemHoverOn:function(e){var t=this.get("container").one(".autosuggest-selectable-item.selected"),n=e.target;t&&t.removeClass("selected"),n.addClass("selected"),n.focus()},destructor:function(){this.processTimeout&&clearTimeout(this.processTimeout)}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-items-list","hermes-template-search-autosuggest-list-item","autosuggest-data-manager","search-url","url-helper"],langBundles:["search"]});
YUI.add("hermes-lang-search_fr-fr",function(e,t){e.Intl.add("hermes/search","fr-FR",{RELEVANT:["Pertinents"],RECENT:["R\u00e9cents"],INTERESTING:["Int\u00e9ressants"],NAME:["Nom"],ACTIVITY:["Activit\u00e9"],SIZE:["Taille"],OLDEST:["Le plus ancien"],NEWEST:["Le plus r\u00e9cent"],DEFAULT_SEARCH:['C\u2019est ici que vous faites des recherches dans Flickr. Voici une recherche de <span class="default-search">',"${query}","</span> pour commencer\u00a0!"],FLICKR_SEARCH:["Recherche Flickr"],NO_MATCHES_FOR_QUERY_TERM:["Oups\u00a0! Aucun r\u00e9sultat pour \u00ab\u00a0","${searchTerm}","\u00a0\u00bb."],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:["Oups\u00a0! Aucun r\u00e9sultat pour ","${searchTerm}"," correspondant aux param\u00e8tres s\u00e9lectionn\u00e9s."],NO_MATCHES_FOR_QUERY:["Oups\u00a0! Aucun r\u00e9sultat pour votre recherche."],TRY_DIFFERENT:["Veuillez pr\u00e9ciser votre recherche."],TRY_DIFFERENT_BROADER:["Veuillez \u00e9largir votre recherche."],SEARCH_ERROR:["Oups\u00a0! La date que vous avez indiqu\u00e9e n\u2019existe pas."],SEARCH_START:["D\u00e9marrez votre recherche"],SEARCHING:["Recherche"],FETCHING_PHOTOS:["R\u00e9cup\u00e9ration d\u2019autres photos..."],SEARCH:["Recherchez"],START_YOUR_SEARCH:["D\u00e9marrez votre recherche"],BY_USER:["par ","${user}"],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:["Oups\u00a0! Aucun r\u00e9sultat pour \u00ab\u00a0","${searchTerm}","\u00a0\u00bb dans vos photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:["Oups\u00a0! Aucun r\u00e9sultat pour \u00ab\u00a0","${searchTerm}","\u00a0\u00bb dans les photos de vos contacts."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:["Oups\u00a0! Aucun r\u00e9sultat pour \u00ab\u00a0","${searchTerm}","\u00a0\u00bb dans les photos de cet utilisateur."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:["Oups\u00a0! Aucun r\u00e9sultat pour \u00ab\u00a0","${searchTerm}","\u00a0\u00bb dans ce groupe."],NO_MATCHES_FOR_QUERY_TERM_YOUR:["Oups\u00a0! Aucun r\u00e9sultat pour votre recherche dans vos photos."],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:["Oops\u00a0! Aucun r\u00e9sultat pour votre recherche dans les photos de vos contacts."],NO_MATCHES_FOR_QUERY_TERM_USER:["Oups\u00a0! Aucun r\u00e9sultat pour votre recherche dans les photos de cet utilisateur."],NO_MATCHES_FOR_QUERY_TERM_GROUP:["Oups\u00a0! Aucun r\u00e9sultat pour votre recherche dans ce groupe."],API_ERROR_HEADER:["Oh non\u00a0! Nous n\u2019avons pas pu traiter votre recherche."],API_ERROR_SUBHEADER:["Modifiez-la et r\u00e9essayez."],PEOPLE_YOU_FOLLOW:["Personnes que vous suivez"],ALL_FLICKR_MEMBERS:["Tous les membres Flickr"],FLICKR_MEMBERS:["Membres Flickr"],YOUR_GROUPS:["Vos groupes"],ALL_FLICKR_GROUPS:["Tous les groupes Flickr"],FLICKR_GROUPS:["Groupes Flickr"],MEMBER_COUNT:[{type:"plural",valueName:"count",options:{zero:"0\u00a0membre",one:"${#} membre",other:"${#} membres"}}],GROUP_PHOTO_COUNT:[{type:"plural",valueName:"count",options:{zero:"aucune photo",one:"${#}\u00a0photo",other:"${#}\u00a0photos"}}],GROUP_DISCUSSION_COUNT:[{type:"plural",valueName:"count",options:{zero:"aucune discussion",one:"${#}\u00a0discussion",other:"${#}\u00a0discussions"}}],YOUR_PHOTOS:["Vos photos"],YOUR_ALBUMS:["Vos albums"],YOUR_GALLERIES:["Vos expos"],FROM_YOUR_CONTACTS:["De vos contacts"],EVERYONES_PHOTOS:["Photos de tout le monde"],VIEW_ALL_COUNT:[{type:"plural",valueName:"count",options:{zero:"plus de photos",other:"Voir les ${#}"}}],RESULTS_COUNT:[{type:"plural",valueName:"count",options:{zero:"aucun r\u00e9sultat",one:"${#} r\u00e9sultat",other:"${#}\u00a0r\u00e9sultats"}}],PEOPLE_PHOTOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"0\u00a0photo",one:"${#} photo",other:"${#} photos"}}],PEOPLE_VIDEOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"aucune vid\u00e9o",one:"${#} vid\u00e9o",other:"${#} vid\u00e9os"}}],PEOPLE_FOLLOWERS_COUNT:[{type:"plural",valueName:"count",options:{zero:"aucun abonn\u00e9",one:"${#} abonn\u00e9",other:"${#} abonn\u00e9s"}}],SAFESEARCH_ON:["SafeSearch activ\u00e9"],SAFESEARCH_OFF:["SafeSearch d\u00e9sactiv\u00e9"],SAFESEARCH_MODERATE:["SafeSearch mod\u00e9r\u00e9"],SEARCH_PHOTOSTREAM:["Rechercher dans la galerie"],SEARCH_FAVORITES:["Rechercher dans les favoris"],ANY_LICENSE:["Toute licence"],ALL_CC:["Tous les Creative Commons"],COMMERCIAL_USE:["Usage commercial autoris\u00e9"],MODS_ALLOWED:["Modifications autoris\u00e9es"],COMMERCIAL_USE_MODS:["Usage commercial et modifications autoris\u00e9s"],NO_RESTRICTIONS:["Aucune restriction de droits d\u2019auteur connue"],MARKETPLACE_LICENSE:["Flickr\u00a0Marketplace"],US_GOVT:["Travaux du gouvernement des \u00c9tats-Unis"],PUBLIC_DOMAIN_DEDICATION:["Droits de domaine public (CC0)"],PUBLIC_DOMAIN_WORK:["\u0152uvre du domaine public"],CC_BY_NC_SA:["Attribution-NonCommercial-ShareAlike"],CC_BY_NC:["Attribution-NonCommercial"],CC_BY_NC_ND:["Attribution-NonCommercial-NoDerivs"],CC_BY:["Attribution"],CC_BY_SA:["Attribution-ShareAlike"],CC_BY_ND:["Attribution-NoDerivs"],PLAIN_COUNT:[{type:"plural",valueName:"count",options:{zero:"0",one:"${#}",other:"${#}"}}],PHOTOS:["Photos"],PEOPLE:["Personnes"],GROUPS:["Groupes"],PHOTOS_POSSESSIVE:["Photos de ","${name}"],FAVES_POSSESSIVE:["Favoris de ","${name}"],CONTACTS_POSSESSIVE:["Contacts de ","${name}"],GROUPS_POSSESSIVE:["Groupes de ","${name}"],VIEWER_FAVES:["Vos favoris"],IN_GROUP_POOL:["Dans le pool du groupe ","${name}"],OPT_OUT_MESSAGE:["Vous voyez la version alpha de notre nouvelle exp\u00e9rience de recherche. Cliquez ici pour revenir \u00e0 l\u2019ancienne version."],OPT_IN_MESSAGE:["Revenir \u00e0 l\u2019exp\u00e9rience de recherche alpha"],OPT_OUT_MESSAGE_BETA:["Vous voyez la version b\u00eata de notre nouvelle exp\u00e9rience de recherche. Cliquez ici pour revenir \u00e0 l'ancienne version."],OPT_IN_MESSAGE_BETA:["Revenir \u00e0 l'exp\u00e9rience de recherche b\u00eata"],SEARCH_BETA_LABEL:["Recherche b\u00eata"],SEARCH_ALPHA_LABEL:["Recherche alpha"],GO_BACK_TO_OLD_SEARCH:["Revenir \u00e0 l'ancienne recherche Flickr"],PROVIDE_FEEDBACK:["Commenter"],FROM_PEOPLE_YOU_FOLLOW
:["Parmi les personnes que vous suivez"],FULL_TEXT_AND_TAGS:["Texte int\u00e9gral avec suggestion de tags"],FULL_TEXT:["Texte int\u00e9gral"],TAGS_ONLY:["Tags uniquement"],RED:["Rouge"],DARK_ORANGE:["Orange fonc\u00e9"],ORANGE:["Orange"],SCHOOL_BUS_YELLOW:["Jaune d'or"],LEMON_YELLOW:["Jaune citron"],GREEN:["Vert"],LIME_GREEN:["Vert \u00e9pinard"],CYAN:["Cyan"],BLUE:["Bleu"],VIOLET:["Violet"],PINK:["Rose"],PALE_PINK:["Rose p\u00e2le"],WHITE:["Blanc"],GRAY:["Gris"],BLACK:["Noir"],MONOCHROME:["monochrome"],JOINED_DATE:["Date d'inscription : ",{type:"date",valueName:"intlDate",format:"monthYearShort"}],HIDE_INACTIVE_GROUPS:["Masquer les groupes inactifs"],ADVANCED:["Avanc\u00e9"],ORIENTATION_AND_SIZE:["Orientation et taille"],ORIENTATION:["Orientation"],MINIMUM_SIZE:["Taille minimale"],PORTRAIT:["Portrait"],SQUARE:["Carr\u00e9"],LANDSCAPE:["Paysage"],PANORAMA:["Panorama"],SMALL_SHOW_ALL_SIZES:["Petite (afficher tous les tailles)"],ALL_SIZES:["Toutes les tailles"],MEDIUM:["Taille moyenne"],LARGE:["Grande taille"],CUSTOM:["Personnalis\u00e9"],COLOR:["Couleur"],DATE:["Date"],FROM:["De"],TO:["\u00c0"],DATE_TAKEN:["Date de prise de vue"],DATE_POSTED:["Date de publication"],DATE_UPLOADED:["Date d'importation"],CONTENT:["Contenu"],VIDEOS:["Vid\u00e9os"],SCREENSHOTS:["Captures d\u2019\u00e9cran"],ILLUSTRATIONS:["Illustrations"],SEARCH_IN:["Rechercher dans"],RESET:["R\u00e9initialiser"],JUSTIFIED_VIEW:["Affichage justifi\u00e9"],THUMBNAIL_VIEW:["Affichage miniatures"],TILE_VIEW:["Affichage Vignettes"],SORT:["Trier"],TOGGLE_ADVANCED:["Bascule avanc\u00e9e"],CAMERA_SETTINGS:["Param\u00e8tres de l\u2019appareil photo"],TOGGLE_SEARCH:["Passer \u00e0 la recherche"],PHOTOS_PEOPLE_OR_GROUPS:["Photos, personnes ou groupes"],PHOTOS_PEOPLE_GROUPS:["Photos, personnes, groupes"],SMALL_SHORT:["P"],MEDIUM_SHORT:["M"],LARGE_SHORT:["G"],ALL:["Tous"],TAGS:["Tags"],CLEAR:["Effacer"],ABSTRACT:["Abstrait"],ART:["Art"],BLACK_AND_WHITE:["Noir et blanc"],MONOCHROME_STYLE:["Monochrome"],BLUR:["Flou"],BRIGHT:["Brillant"],CURVES:["Courbes"],DIAGONAL:["Diagonale"],ETHEREAL:["C\u00e9leste"],GEOMETRIC:["G\u00e9om\u00e9trique"],HDR:["Grande gamme dynamique"],LINES:["Lignes"],MACRO:["Macro"],DEPTH_OF_FIELD:["Faible profondeur de champ"],MINIMALIST:["Minimaliste"],PASTEL:["Pastel"],PATTERNS:["Motifs"],ROUND:["Rond"],SERENE:["Calme"],SYMMETRY:["Sym\u00e9trie"],TEXTURES:["Textures"],TRIANGLES:["Triangles"],VINTAGE:["Vintage"],BOKEH:["Effet bokeh"],SEARCH_PHOTOS:["Rechercher des photos"],SEARCH_PEOPLE:["Rechercher des personnes"],SEARCH_GROUPS:["Recherchez des groupes"],EVERYONE:["Tout le monde"],SIGN_IN_BEFORE_SEARCH_TITLE:["Ce contenu est r\u00e9serv\u00e9 \u00e0 un public adulte."],SIGN_IN_BEFORE_SEARCH_MESSAGE:["Rejoignez Flickr pour d\u00e9sactiver le filtre SafeSearch."],SIGNUP_FOOTER_MESSAGE:["G\u00e9rez les photos de mani\u00e8re priv\u00e9e et trouvez l\u2019inspiration dans la communaut\u00e9."]})},"@VERSION@",{requires:["intl"]});
