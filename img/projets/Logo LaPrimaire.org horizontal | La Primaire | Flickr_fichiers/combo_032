YUI.add("hermes-template-notification-photo-note",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,count:t!=null?t.subPeopleCount:t,intlName:"notifications.NOTIF_NOTES_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_NOTES"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-photo-note",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-photo-share",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,count:t!=null?t.subPeopleCount:t,intlName:"notifications.NOTIF_SHARE_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"			"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.url:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_SHARE"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="details">\n	<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"	</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-photo-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-group-discussion-reply",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"				"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{count:t!=null?t.subPeopleCount:t,mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,groupUrl:(s=t!=null?t.object:t)!=null?s.groupUrl:s,groupName:(s=t!=null?t.object:t)!=null?s.groupName:s,replyUrl:t!=null?t.replyUrl:t,objectTitle:(s=t!=null?t.object:t)!=null?s.title:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_GROUP_DISCUSSION_REPLY_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"				"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{mediaType:(s=t!=null?t.object:t)!=null?s.mediaType:s,groupUrl:(s=t!=null?t.object:t)!=null?s.groupUrl:s,groupName:(s=t!=null?t.object:t)!=null?s.groupName:s,replyUrl:t!=null?t.replyUrl:t,objectTitle:(s=t!=null?t.object:t)!=null?s.title:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_GROUP_DISCUSSION_REPLY"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'<div class="notification">\n	\n	<a class="avatar group tiny no-menu" style="background-image: url('+u(o((s=(s=t!=null?t.object:t)!=null?s.group:s)!=null?s.bestIconURL:s,t))+');" href="'+u(o((s=t!=null?t.object:t)!=null?s.groupUrl:s,t))+'"></a>\n\n	<div class="details">\n		<span class="headline">\n\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"		</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"	</div>\n\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-group-discussion-reply",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-gallery-comment",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"				"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,objectName:(s=t!=null?t.object:t)!=null?s.title:s,secondPersonUrl:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.url:s,secondPersonName:(s=(s=t!=null?t.people:t)!=null?s["1"]:s)!=null?s.name:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,count:t!=null?t.subPeopleCount:t,intlName:"notifications.NOTIF_GALLERY_COMMENT_MULTI"},data:i}))+"\n"},3:function(e,t,n,r,i){var s;return"				"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{objectUrl:(s=t!=null?t.object:t)!=null?s.url:s,objectName:(s=t!=null?t.object:t)!=null?s.title:s,personUrl:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.url:s,personName:(s=(s=t!=null?t.people:t)!=null?s["0"]:s)!=null?s.name:s,intlName:"notifications.NOTIF_GALLERY_COMMENT"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'<div class="notification">\n	\n	<a class="avatar person tiny no-menu" style="background-image: url('+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.buddyicon:s,t))+');" href="'+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,t))+'"></a>\n\n	<div class="details">\n		<span class="headline">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.subPeopleCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"		</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"	</div>\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-gallery-comment",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-friend-join",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'<div class="notification">\n	\n	<a class="avatar person tiny no-menu" style="background-image: url('+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.buddyicon:s,t))+');" href="'+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,t))+'"></a>\n\n	<div class="details">\n		<span class="headline">\n			'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_FRIEND_JOIN"},data:i}))+"\n		</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"	</div>\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-friend-join",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("hermes-template-notification-group-topic-new",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'<div class="notification">\n	\n	<a class="avatar person tiny no-menu" style="background-image: url('+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.buddyicon:s,t))+');" href="'+u(o((s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,t))+'"></a>\n\n	<div class="details">\n		<span class="headline">\n			'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{groupUrl:(s=(s=t!=null?t.object:t)!=null?s.group:s)!=null?s.url:s,groupName:(s=(s=t!=null?t.object:t)!=null?s.group:s)!=null?s.title:s,discussionUrl:(s=t!=null?t.object:t)!=null?s.url:s,discussionName:(s=t!=null?t.object:t)!=null?s.title:s,personUrl:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.profileURL:s,personName:(s=(s=t!=null?t.event:t)!=null?s.owner:s)!=null?s.displayname:s,intlName:"notifications.NOTIF_NEW_GROUP_DISCUSSION"},data:i}))+"\n		</span>\n\n"+((s=e.invokePartial(r["notification-photo-extra-info"],t,{name:"notification-photo-extra-info",data:i,indent:"		",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"	</div>\n</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["notification-photo-extra-info"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notification-group-topic-new",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-photo-extra-info"]});
YUI.add("notification-view",function(e){var t=e.flutil;e.namespace("Views")[this.name]=e.Base.create("notification-view",e.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models"},initializer:function(e){return this.objectId=e.objectId,this.object=e.object,this.objectType=e.objectType,this.subevents=e.events,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e={object:this.object,type:this.objectType,event:this.subevents[0],subCount:this.subevents.length-1,viewer:this.appContext.getViewer(),eventCount:this.subevents.length,events:this.subevents},n;if(this.objectType==="photo"){for(var r=0;r<e.events.length;r++)e.events[r].owner.url="/photos/"+e.events[r].owner.pathAlias||e.events[r].owner.id;e.event.type!=="group-invite"&&(e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1);if(e.event.type==="comment")n="notification-photo-comment";else if(e.event.type==="fave")n="notification-photo-fave";else{if(e.event.type==="gallery")return n="notification-added-to-gallery",this.setContainerWithTemplate(n,e),this;if(e.event.type==="people")n="notification-person";else if(e.event.type==="tag")n="notification-tag";else if(e.event.type==="photo_comment_mention")n="notification-mention";else{if(e.event.type==="group_invite")return e.groups=this.getEventGroups(e.events),e.groupsCount=e.groups.length,e.subGroupsCount=e.groups.length-1,n="notification-photo-group-invite",this.setContainerWithTemplate(n,e),this;e.event.type==="note"?n="notification-photo-note":e.event.type==="share"&&(n="notification-photo-share")}}}else if(this.objectType==="person"){if(e.event&&e.event.type==="contacted")return e.event.owner.url="/photos/"+e.event.owner.pathAlias||e.event.owner.id,this.setContainerWithTemplate("notification-person-follow",e),this;e.event&&e.event.type==="friend_join"&&this.setContainerWithTemplate("notification-friend-join",e)}else{if(this.objectType==="group")return e.event&&e.event.type==="group_user_invite"&&this.setContainerWithTemplate("notification-group-invite",e),this;if(this.objectType==="discussion")return e.event&&(e.event.type==="topic_reply"||e.event.type==="reply_reply")&&(e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,e.replyUrl=e.object.url+"/"+e.event.replyId,this.setContainerWithTemplate("notification-group-discussion-reply",e)),e.event&&e.event.type==="group_topic_new"&&this.setContainerWithTemplate("notification-group-topic-new",e),this;this.objectType==="gallery"&&e.event.type==="comment"&&(e.people=this.getEventOwners(e.events),e.peopleCount=e.people.length,e.subPeopleCount=e.people.length-1,this.setContainerWithTemplate("notification-gallery-comment",e))}return n&&this.setContainerWithTemplate("notification-shell",t.extend({details:this.templates(n)(e)},e)),this},activate:function(){return this},headline:function(){},getTaggedPeople:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i={id:r.personTagged.id,name:r.personTagged.displayname,url:r.personTagged.profileURL},s=!1;for(var o=0;o<t.length;o++)if(t[o].id===i.id){s=!0;break}s||t.push(i)}return t},getEventOwners:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i={id:r.owner.id,name:r.owner.displayname,url:r.owner.profileURL},s=!1;for(var o=0;o<t.length;o++)if(t[o].id===i.id){s=!0;break}s||t.push(i)}return t},getEventGroups:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i={id:r.group.id,title:r.group.title,url:r.group.url,iconUrl:r.group.bestIconURL},s=!1;for(var o=0;o<t.length;o++)if(t[o].id===i.id){s=!0;break}s||t.push(i)}return t}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","hermes-template-notifications","hermes-template-notification-photo-comment","hermes-template-notification-group-invite","hermes-template-notification-added-to-gallery","hermes-template-notification-photo-fave","hermes-template-notification-shell","hermes-template-notification-person-follow","hermes-template-notification-tag","hermes-template-notification-person","hermes-template-notification-mention","hermes-template-notification-photo-group-invite","hermes-template-notification-photo-extra-info","hermes-template-notification-photo-note","hermes-template-notification-photo-share","hermes-template-notification-group-discussion-reply","hermes-template-notification-gallery-comment","hermes-template-notification-friend-join","hermes-template-notification-group-topic-new"],langBundles:["common","relative-dates","notifications"]});
YUI.add("hermes-lang-relative-dates_fr-fr",function(e,t){e.Intl.add("hermes/relative-dates","fr-FR",{SECOND_LONG:["1\u00a0seconde"],SECONDS_LONG:["${time}","\u00a0secondes"],MINUTE_LONG:["1\u00a0min"],MINUTES_LONG:["${time}","\u00a0min"],HOUR_LONG:["1\u00a0heure"],HOURS_LONG:["${time}","\u00a0heures"],DAY_LONG:["1\u00a0jour"],DAYS_LONG:["${time}","\u00a0jours"],MONTH_LONG:["1\u00a0mois"],MONTHS_LONG:["${time}","\u00a0mois"],YEAR_LONG:["1\u00a0an"],YEARS_LONG:["${time}","\u00a0ann\u00e9es"],SECOND_SHORT:["1\u00a0s"],SECONDS_SHORT:["${time}","\u00a0s"],MINUTE_SHORT:["1\u00a0m"],MINUTES_SHORT:["${time}","\u00a0m"],HOUR_SHORT:["1\u00a0h"],HOURS_SHORT:["${time}","\u00a0h"],DAY_SHORT:["1\u00a0j"],DAYS_SHORT:["${time}","\u00a0j"],MONTH_SHORT:["1\u00a0mo"],MONTHS_SHORT:["${time}","\u00a0mo"],YEAR_SHORT:["1\u00a0a"],YEARS_SHORT:["${time}","\u00a0a"],SECOND_LONG_FUTURE:["en 1\u00a0seconde"],SECONDS_LONG_FUTURE:["en ","${time}","\u00a0secondes"],MINUTE_LONG_FUTURE:["en 1\u00a0minute"],MINUTES_LONG_FUTURE:["en ","${time}","\u00a0minutes"],HOUR_LONG_FUTURE:["en 1\u00a0heure"],HOURS_LONG_FUTURE:["en ","${time}","\u00a0heures"],DAY_LONG_FUTURE:["en 1\u00a0jour"],DAYS_LONG_FUTURE:["en ","${time}","\u00a0jours"],MONTH_LONG_FUTURE:["en 1\u00a0mois"],MONTHS_LONG_FUTURE:["en ","${time}","\u00a0mois"],YEAR_LONG_FUTURE:["en 1\u00a0ann\u00e9e"],YEARS_LONG_FUTURE:["en ","${time}","\u00a0ann\u00e9es"],FUTURE_SHORT_FUTURE:["en ","${time}"],SECOND_SHORT_FUTURE:["en 1\u00a0s"],SECONDS_SHORT_FUTURE:["en ","${time}","\u00a0s"],MINUTE_SHORT_FUTURE:["en 1\u00a0min"],MINUTES_SHORT_FUTURE:["en ","${time}","\u00a0min"],HOUR_SHORT_FUTURE:["en 1\u00a0h"],HOURS_SHORT_FUTURE:["en ","${time}","\u00a0h"],DAY_SHORT_FUTURE:["en 1\u00a0j"],DAYS_SHORT_FUTURE:["en ","${time}","\u00a0j"],MONTH_SHORT_FUTURE:["en 1\u00a0m"],MONTHS_SHORT_FUTURE:["en ","${time}","\u00a0m"],YEAR_SHORT_FUTURE:["en 1\u00a0a"],YEARS_SHORT_FUTURE:["en ","${time}","\u00a0a"],SECOND_LONG_PAST:["Il y a 1\u00a0seconde"],SECONDS_LONG_PAST:["Il y a ","${time}","\u00a0secondes"],MINUTE_LONG_PAST:["Il y a 1\u00a0minute"],MINUTES_LONG_PAST:["Il y a ","${time}","\u00a0minutes"],HOUR_LONG_PAST:["Il y a 1 heure"],HOURS_LONG_PAST:["Il y a ","${time}","\u00a0heures"],DAY_LONG_PAST:["Il y a 1\u00a0jour"],DAYS_LONG_PAST:["Il y a ","${time}","\u00a0jours"],MONTH_LONG_PAST:["Il y a 1\u00a0mois"],MONTHS_LONG_PAST:["Il y a ","${time}","\u00a0mois"],YEAR_LONG_PAST:["Il y a 1\u00a0an"],YEARS_LONG_PAST:["Il y a ","${time}","\u00a0ans"],SECOND_SHORT_PAST:["Il y a 1\u00a0s"],SECONDS_SHORT_PAST:["Il y a ","${time}","\u00a0s"],MINUTE_SHORT_PAST:["Il y a 1\u00a0min"],MINUTES_SHORT_PAST:["Il y a ","${time}","\u00a0min"],HOUR_SHORT_PAST:["Il y a 1\u00a0h"],HOURS_SHORT_PAST:["Il y a ","${time}","\u00a0h"],DAY_SHORT_PAST:["Il y a 1\u00a0j"],DAYS_SHORT_PAST:["Il y a ","${time}","\u00a0j"],MONTH_SHORT_PAST:["Il y a 1\u00a0m"],MONTHS_SHORT_PAST:["Il y a","${time}","\u00a0m"],YEAR_SHORT_PAST:["Il y a 1\u00a0a"],YEARS_SHORT_PAST:["Il y a ","${time}","\u00a0a"],NO_DATE:["-"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-notifications_fr-fr",function(e,t){e.Intl.add("hermes/notifications","fr-FR",{NOTIF_PHOTO_FAVE:["<a href='","${ownerUrl}","'>","${owner}","</a> a ajout\u00e9 votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}," aux favoris."],NOTIF_PHOTO_FAVE_MULTI:[{type:"plural",valueName:"count",options:{one:["<a href='","${ownerUrl}","'>","${owner}","</a> et <a href='","${secondUrl}","'>","${secondOwner}","</a> ont ajout\u00e9 votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}],other:["<a href='","${ownerUrl}","'>","${owner}","</a> et ","${count}"," autres personnes ont ajout\u00e9 votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}]}}," aux favoris."],NOTIF_PERSON_FOLLOW:["<a href='","${ownerUrl}","'>","${owner}","</a> vous suit maintenant"],NOTIF_PHOTO_COMMENT_YOURS:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajout\u00e9 un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_PHOTO_COMMENT_YOURS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> ont ajout\u00e9 un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> et ","${count}"," autres personnes ont ajout\u00e9 un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}]}},"."],NOTIF_PHOTO_COMMENT_OTHER:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajout\u00e9 un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_PHOTO_COMMENT_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> ont ajout\u00e9 un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> et ","${count}"," autres personnes ont ajout\u00e9 un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_MENTION:['<a href="',"${personUrl}",'">',"${personName}","</a> vous a mentionn\u00e9 dans une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_MENTION_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," vous ont mentionn\u00e9 dans une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_PHOTO_GROUP_INVITE:["<a href='","${ownerUrl}","'>","${owner}","</a> vous a invit\u00e9 \u00e0 ajouter votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}," au groupe <a href='","${groupUrl}","'>","${groupName}","</a>."],NOTIF_PHOTO_GROUP_INVITE_MULTI:["Vous avez \u00e9t\u00e9 invit\u00e9 \u00e0 ajouter votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}," ",{type:"plural",valueName:"count",options:{one:["aux groupes <a href='","${groupUrl}","'>","${groupName}","</a> et <a href='","${secondGroupUrl}","'>","${secondGroupName}","</a>"],other:["au groupe <a href='","${groupUrl}","'>","${groupName}","</a> et \u00e0 ","${count}"," autres groupes"]}},"."],NOTIF_GROUP_USER_INVITE:['Vous avez \u00e9t\u00e9 invit\u00e9 \u00e0 rejoindre le groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_TAGS:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajout\u00e9 un tag sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_TAGS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont ajout\u00e9 un tag sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_GALLERY:["Votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},' a \u00e9t\u00e9 ajout\u00e9e \u00e0 l\u2019expo <a href="',"${galleryUrl}",'">',"${galleryName}","</a>."],NOTIF_GALLERY_MULTI:["Votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}," a \u00e9t\u00e9 ajout\u00e9e ",{type:"plural",valueName:"count",options:{one:['aux expos <a href="',"${galleryUrl}",'">',"${galleryName}",'</a> et <a href="',"${secondGalleryUrl}",'">',"${secondGalleryName}","</a>"],other:['\u00e0 l\u2019expo <a href="',"${galleryUrl}",'">',"${galleryName}","</a> et \u00e0 ","${count}"," autres expos"]}},"."],NOTIF_ADD_PERSON:['<a href="',"${personUrl}",'">',"${personName}","</a> a tagu\u00e9 des personnes sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_ADD_PEOPLE:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">'
,"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont tagu\u00e9 des personnes sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_ADD_ME:['<a href="',"${ownerUrl}",'">',"${ownerName}","</a> vous a tagu\u00e9 sur une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_NOTES:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajout\u00e9 une note sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_NOTES_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont ajout\u00e9 une note sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}},"."],NOTIF_VIEW_RECENT_ACTIVITY:["Afficher l\u2019activit\u00e9 r\u00e9cente"],NOTIFICATIONS:["Notifications"],NOTIF_SHARE:['<a href="',"${personUrl}",'">',"${personName}","</a> a partag\u00e9 une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vid\u00e9o"],other:["photo"]}}," avec vous."],FLICKR_MAIL_COUNT_PAREN:["(","${count}",")"],FLICKR_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> a r\u00e9pondu \u00e0 la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],FLICKR_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}},' ont r\u00e9pondu \u00e0 la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> a r\u00e9pondu \u00e0 la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}},' ont r\u00e9pondu \u00e0 la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_ONBOARDING_TITLE:["NOUVEAU \u2014 Centre de notification"],NOTIF_ONBOARDING_DESCRIPTION:['Vous trouverez ici les notifications de votre activit\u00e9 r\u00e9cente sur Flickr et pourrez acc\u00e9der facilement \u00e0 <a href="/mail">FlickrMail</a>. Nous avons tout fait pour vous faire plaisir !'],NOTIF_GALLERY_COMMENT:['<a href="',"${personUrl}",'">',"${personName}",'</a> a ajout\u00e9 un commentaire sur votre galerie <a href="',"${objectUrl}",'">',"${objectName}","</a>."],NOTIF_GALLERY_COMMENT_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> ont comment\u00e9 votre galerie <a href="',"${objectUrl}",'">',"${objectName}","</a>."],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}",' autres personnes ont comment\u00e9 votre galerie <a href="',"${objectUrl}",'">',"${objectName}","</a>."]}}],NOTIF_FRIEND_JOIN:['Votre ami <a href="',"${personUrl}",'">',"${personName}","</a> a rejoint Flickr\u00a0!"],NOTIF_NEW_GROUP_DISCUSSION:['<a href="',"${personUrl}",'">',"${personName}",'</a> a cr\u00e9\u00e9 la discussion <a href="',"${discussionUrl}",'">',"${discussionName}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_FLICKRMAIL:['<a href="',"${personUrl}",'">',"${personName}",'</a> sent you a message: <a href="',"${mailUrl}",'">\u201c',"${mailTitle}","\u201d</a>"],NOTIF_TURN_OFF_OBJECT:["Turn off notifications for this post"],NOTIF_TURN_ON_OBJECT:["Turn on notifications for this post"],NOTIF_HIDE_THIS:["Hide this notification"]})},"@VERSION@",{requires:["intl"]});
YUI.add("notifications-view",function(e,t){var n=require("lib/flog")(t);e.namespace("Views")[this.name]=e.Base.create("notifications-view",e.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models",gallery:"gallery-models"},initializer:function(e){var t=this.appContext.getViewer();return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.nsid=t&&t.signedIn?t.nsid:undefined,e.nsid=this.nsid,this.pageNum=0,this.pageSize=30,this.isFetchingNotifs=!1,this.scrollBottomLoadDist=300,this.endOfNotifs=!1,this.shouldFetchNotifs=e.shouldFetchNotifs,this.height=e.height,this.width=e.width,this.listHeight=e.listHeight,this.overflowX=e.overflowX,this.overflowY=e.overflowY,this.notifFilter=e.notifFilter,this},loadState:function(){return this},buildContainer:function(){var e=this;return this.setContainerWithTemplate("notifications",{notifications:[],height:e.height,width:e.width,listHeight:e.listHeight,overflowX:e.overflowX,overflowY:e.overflowY}),this},activate:function(){var e=this,t,n,r,i,s;return e.scrollContainer=e.get("container").one(".notifications-list"),e.scrollContainerElement=this.scrollContainer.getDOMNode(),this.registerEventHandler(e.scrollContainer.on("scroll",e.handleScrollNotifications.bind(e))),this.registerEventHandler(e.scrollContainer.on("mousewheel",e.preventParentScroll.bind(e))),e.get("personNotificationsModels")?e.getMoreNotifications():(t=this.appContext.getViewer(),this.appContext.getModel("person-notifications-models",t.nsid).then(function(t){e.set("personNotificationsModels",t),r=t.getValue("notifications").size(),i=t.getValue("unseenNotificationCount"),e.shouldFetchNotifs&&i!==0||r===0?(e.shouldFetchNotifs=!1,t.setValue("unseenNotificationCount",0),e.getMoreNotifications()):(s=t.getValue("notifications").getList(),e.pageNum=Math.floor(r/e.pageSize),e.appendPage(s)),n=t.getValue("unreadFlickrMailCount"),n&&n!==0&&e.get("container").one(".flickr-mail-count").setHTML(e.intlMessage({intlName:"notifications.FLICKR_MAIL_COUNT_PAREN",count:n}))})),this},handleScrollNotifications:function(e){if(this.isFetchingNotifs)return;this.scrollContainerElement.offsetHeight+this.scrollContainerElement.scrollTop+this.scrollBottomLoadDist>=this.scrollContainerElement.scrollHeight&&this.getMoreNotifications()},preventParentScroll:function(e){var t=e.target.ancestor(".notifications-list"),n,r;if(!t)return;n=e.wheelDelta<0,r=t.getDOMNode(),(r.scrollTop<=0&&!n||r.scrollTop+r.offsetHeight>=r.scrollHeight&&n)&&e.preventDefault()},getMoreNotifications:function(){var e=this;e.endOfNotifs||(e.isFetchingNotifs=!0,e.showBalls(e.get("container").one(".notifications-list")),e.retrieveNotifsPage())},appendPage:function(t){var r=this;t.forEach(function(t){var i=t.toJSON(),s;if(!i.object)return;i.appContext=this.appContext;if(!i.events||i.events.length===0)return;try{s=new e.Views["notification-view"](i),s.initialize(i),s.buildContainer(),s.activate();var o=e.Node.create("<li></li>");i.seen||o.addClass("unseen"),o.setHTML(s.get("container").get("outerHTML")),r.get("container").one(".notifications-list").append(o),t.setValue("seen",!0)}catch(u){n.error("failed to initialize and load",{err:u})}})},showBalls:function(t){this.balls||(this.balls=e.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),(t||this.get("container")).append(this.balls)},hideBalls:function(){this.balls&&this.balls.remove()},retrieveNotifsPage:function(){var e=this,t=e.get("personNotificationsModels");return t.getValue("notifications").getPage({page:e.pageNum+1,apiParams:{filter:e.notifFilter}}).then(function(n){return n.length!==0?(e.pageNum++,e.set("personNotifications",t.getValue("notifications")),e.appendPage(n)):e.endOfNotifs=!0,e.hideBalls(),e.isFetchingNotifs=!1,e}).then(function(e){e.registerEventHandler(e.get("container").all("a").on("focus",function(t){var n=t.target.ancestor("li");n&&e.findFocus.call(this,n)}.bind(e)))})},findFocus:function(e){var t=e.one("a.photo");t?t.focus():e.one("a:first-child").focus()}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications"],langBundles:["common","notifications"],optional:["person-notifications-models","notification-view","photo-models","group-info-models","person-models","gallery-models"]});
YUI.add("hermes-template-onboarding-info",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="onboarding-info-container" style="width:'+a((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"width",hash:{},data:i}):s))+'">\n	<h2>'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.title:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"</h2>\n	<p>\n		"+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.description:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n	</p>\n	<svg class="dismiss-onboarding icon icon-close"><use xlink:href="#icon-close"></use></svg>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/onboarding-info",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("onboarding-info-view",function(e){e.namespace("Views")[this.name]=e.Base.create("onboarding-info-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.appContext=this.appContext||e.appContext,this.title=e.title,this.description=e.description,this.width=e.width,this},loadState:function(){return this},buildContainer:function(){return this.setContainerWithTemplate("onboarding-info",{title:this.title,description:this.description,width:this.width}),this},activate:function(){var e=this;return e.registerEventHandler(e.get("container").one(".dismiss-onboarding").on("click",e.handleDismissClick.bind(e))),this},handleDismissClick:function(e){this.fire("actionClick",e)}})},"@VERSION@",{requires:["flickr-view","hermes-template-onboarding-info"],langBundles:["common","notifications"]});
YUI.add("notifications-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("notifications-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.pollingFailed=!1,this.shouldFetchNotifs=!0,this.localStorageOnboardingShown=!1,this.notifFilter=["group_topic_new","user_gallery_comment","flickrmail"].join(","),this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("notifications-menu"),this.localStorageOnboardingShown=!e.StorageHelper.isLocalStorageAvailable()||e.StorageHelper.getItem("notificationsOnboardingShown")==="true",this},loadState:function(){var t=this,n=this.appContext.getViewer();return this.appContext.getModel("person-notifications-models",n.nsid).then(function(r){t.set("personNotificationsModel",r);if(Date.now()-r.getValue("unseenLastFetchedTimestamp")>e.config.flickr.notifications.loading_count_refetch_delay)return r.remoteReadUnseenNotificationCount({id:n.nsid,filter:t.notifFilter},t.appContext).then(null,function(e){t.pollingFailed=!0})})},buildContainer:function(){var e=this,t=e.formatCount99(e.get("personNotificationsModel").getValue("unseenNotificationCount"));return this.setContainerWithTemplate("notifications-menu",{unseenNotificationCount:t}),this},activate:function(){var e=this,t=e.get("personNotificationsModel");e.unseenBadge=e.get("container").one(".c-notification-unseencount"),e.unseenCount=0,e.notifIcon=e.get("container").one(".c-notification-icon"),t.getValue("unseenNotificationCount")===0?e.unseenBadge.addClass("hidden"):e.unseenBadge.removeClass("hidden"),this.registerEventHandler(this.get("container").on("click",e.openMenu.bind(e))),this.registerEventHandler(this.get("container").on("key",e.keyboardToggleMenu.bind(e),"down:13,32")),this.registerEventHandler(this.get("container").on("key",e.enterMenu.bind(e),"down:9,40")),e.pollForUnseenNotifs(),e.localStorageOnboardingShown||e.showOnboarding()},pollForUnseenNotifs:function(){this.pollIntervalId=setInterval(this.readUnseenNotifs.bind(this),e.config.flickr.notifications.polling_delay)},readUnseenNotifs:function(){var t=this,n=this.appContext.getViewer(),r=t.get("personNotificationsModel");r.remoteReadUnseenNotificationCount({id:n.nsid,filter:t.notifFilter},t.appContext).then(function(e){t.shouldFetchNotifs=!0,e!==t.unseenCount&&(t.unseenCount=e,e!==0?(t.unseenBadge.removeClass("hidden"),t.unseenBadge.set("text",t.formatCount99(e))):t.unseenBadge.addClass("hidden"))},function(n){clearInterval(t.pollIntervalId),t.pollingFailed||(t.pollingFailedTimeoutId=setTimeout(t.pollForUnseenNotifs.bind(t),e.config.flickr.notifications.polling_failure_timeout)),t.pollingFailed=!0})},openMenu:function(){this.revealNotifications()},keyboardToggleMenu:function(e){e.preventDefault(),!this.droparound||this.droparound.isClosed?this.revealNotifications():this.droparound.close()},enterMenu:function(e){var t=e.keyCode;if(t===9&&!e.shiftKey&&e.target.getAttribute("aria-expanded")==="true"||t===40){e.preventDefault();var n=this.droparound.get("container").one("div.notifs-droparound");if(n){var r=n.one("a.mail-icon");this.registerEventHandler(r.on("key",this.enterNotificationsList.bind(this),"down:9,40")),r.focus()}}},enterNotificationsList:function(e){var t=e.keyCode;if(t===9&&!e.shiftKey||t===40)e.preventDefault(),this.droparound.get("subview").findFocus.call(this,this.droparound.get("container").one("div.notifs-droparound").one("ul").one("li:first-child"))},revealNotifications:function(){var t=this.appContext.viewportData.getWidth(),n=this.appContext.viewportData.getHeight(),r=t>700?60:80,i=t>700?"":t-2+"px",s=t>700?"":"500px",o=t>700?"":"404px",u=new e.Views["notifications-view"]({appContext:this.appContext,width:i,height:s,listHeight:o,shouldFetchNotifs:this.shouldFetchNotifs,notifFilter:this.notifFilter});u.appContext=this.appContext,this.droparound=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,anchorOffsetVertical:-4,anchorOffsetHorizontal:r,mirrorArrowAdjustment:r-11,showDropArrow:!0,contentPadding:0,classList:"notifs-droparound",anchorElement:this.get("container").one(".c-notification-icon"),subview:u,observePageResize:!0,positionFixed:!0,autoSizeToContent:!0}),this.droparound.show(),this.unseenBadge.addClass("hidden"),this.shouldFetchNotifs=!1},formatCount99:function(e){return e>=100?"99+":e},showOnboarding:function(){var t=this.appContext.viewportData.getWidth(),n=t>700?60:75,r=t>700?"360px":"200px",i=new e.Views["onboarding-info-view"]({title:this.intlHTMLMessage({intlName:"notifications.NOTIF_ONBOARDING_TITLE"}),description:this.intlHTMLMessage({intlName:"notifications.NOTIF_ONBOARDING_DESCRIPTION"}),width:r});this.droparound=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,anchorOffsetVertical:-4,anchorOffsetHorizontal:n,mirrorArrowAdjustment:n-11,showDropArrow:!0,contentPadding:0,classList:"notifs-onboarding-droparound",overlayClassList:"dark-overlay under-nav",anchorElement:this.get("container").one(".c-notification-icon"),subview:i,observePageResize:!0,positionFixed:!0,autoSizeToContent:!0}),this.droparound.show(),this.registerEventHandler(this.droparound.on("closeDroparound",this.handleCloseOnboarding.bind(this)))},handleCloseOnboarding:function(t){e.StorageHelper.setItem("notificationsOnboardingShown","true")},destructor:function(){clearInterval(this.pollIntervalId),clearTimeout(this.pollingFailedTimeoutId)}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications-menu","fluid-droparound-view","notifications-view","onboarding-info-view"],langBundles:["notifications","common"]});
YUI.add("hermes-template-person-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return"					"+e.escapeExpression(e.lambda((s=t!=null?t.person:t)!=null?s.realname:s,t))+"\n					"+((s=n["if"].call(t!=null?t:{},t!=null?t.personLocation:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},2:function(e,t,n,r,i){return" - "},4:function(e,t,n,r,i){var s;return(s=n.each.call(t!=null?t:{},t!=null?t.photostream:t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:""},5:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:""},6:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression,c=e.lambda;return'					<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" width="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.width:s,t))+'" height="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.height:s,t))+'" style="background: url(https://s.yimg.com/pw/images/spaceball.gif);" data-track="personCardRecentPhotosClick"></a>\n'},8:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'					<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" style="background: url('+l(e.lambda((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.displayUrl:s,t))+');" data-track="personCardRecentPhotosClick"></a>\n'},10:function(e,t,n,r,i){return'			<span class="tertiary">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"person.NO_PHOTOS"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression,l=e.lambda;return'\n<div>\n	<section>\n		<div class="follow-subview">'+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["follow-view"]:t,{name:"outlet",hash:{},data:i}))+'</div>\n\n		<div class="attribution">\n			<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.photostream:s,t))+'" data-track="personCardAttributionNameClick">\n				<h3 class="fade-out">'+f(l((s=t!=null?t.person:t)!=null?s.username:s,t))+'</h3>\n			</a>\n		</div>\n		<div class="info">\n			<span class="secondary realname fade-out">\n'+((s=n["if"].call(u,(s=t!=null?t.person:t)!=null?s.realname:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				"+f((o=(o=n.personLocation||(t!=null?t.personLocation:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"personLocation",hash:{},data:i}):o))+'\n			</span>\n		</div>\n\n		<div class="recent-photos">\n'+((s=n["if"].call(u,t!=null?t.photostream:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:"")+'		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.sendFlickrMail:s,t))+'" data-track="personCardMessageClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.MESSAGE"},data:i}))+'</a>\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.albums:s,t))+'" data-track="personCardAlbumsClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.ALBUMS"},data:i}))+'</a>\n	<a href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.favorites:s,t))+'" data-track="personCardFavesClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.FAVES"},data:i}))+'</a>\n	<a class="align-right" href="'+f(l((s=t!=null?t.personURLS:t)!=null?s.profile:s,t))+'" data-track="personCardProfileClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"person.PROFILE"},data:i}))+"</a>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/person-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("person-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("person-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){var t=this,n={contentType:7};return this.nsid?n.id=this.nsid:n.pathAlias=this.pathAlias,(new e.FlickrPromise({person:this.appContext.getModel("person-models",n),photostream:this.appContext.getModel("photostream-models",n),personProfile:this.appContext.getModel("person-profile-models",n)})).then(function(e){return t.personModel=e.person,t.personLocation=e.personProfile.getValue("location"),e.photostream.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.photostreamPhotos=e})},function(e){t.loadingError=!0,e.code===1&&e.message==="User not found"&&(t.badUser=!0)})},buildContainer:function(){var t,n;return this.loadingError?(this.badUser?n='<span class="no-user">'+this.intlMessage({intlName:"person.NO_LONGER_ON_FLICKR"})+"</span>":n='<span class="error-user">'+this.intlMessage({intlName:"person.ERROR_LOADING"})+"</span>",this.setContainerHTML(n)):(t=this.personModel.toJSON(),this.setContainerWithTemplate("person-card",{person:t,photostream:this.photostreamPhotos.map(function(e){return e.toJSON()}),personLocation:this.personLocation,personURLS:e.URLHelper.generatePersonUrls(this.personModel)})),this},activate:function(){var e=this.get("container"),t=e.one(".follow-view"),n=t.one(".relationship"),r=t.one(".relationship > .is-following"),i=e.one(".attribution");return n?r&&i.addClass("shorter"):i.addClass("full"),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-person-card","url-helper"],langBundles:["person","common"]});
YUI.add("hermes-lang-person_fr-fr",function(e,t){e.Intl.add("hermes/person","fr-FR",{MESSAGE:["Message"],ALBUMS:["Albums"],FAVES:["Favoris"],PROFILE:["Profil"],NO_PHOTOS:["Vous ne voyez aucune photo de cet utilisateur."],NO_LONGER_ON_FLICKR:["Cet utilisateur est introuvable ou n\u2019est plus sur Flickr."],ERROR_LOADING:["Erreur lors du chargement de la carte d\u2019utilisateur. Veuillez r\u00e9essayer."],RELATIONSHIP_FRIEND_ERROR:["Un probl\u00e8me s\u2019est produit lors de la configuration de votre relation d\u2019ami."],RELATIONSHIP_FAMILY_ERROR:["Un probl\u00e8me s\u2019est produit lors de la configuration de votre relation de famille."],SIGN_IN_BEFORE_FOLLOW_TITLE:["Vous avez trouv\u00e9 quelqu'un \u00e0 suivre\u00a0!"],SIGN_IN_BEFORE_FOLLOW_MESSAGE:["C'est g\u00e9nial\u00a0! Il suffit de vous connecter pour les suivre."],JOIN_FLICKR_AND_FOLLOW:["Rejoignez Flickr et ne manquez plus aucune publication de ","${person}","."],SIGN_IN_AND_FOLLOW:["Connectez-vous et suivez qui vous voulez"],CURATOR_PASS_OVER:["Transmission"],CURATOR_PASS_OVER_UNDO:["Annuler la transmission"]})},"@VERSION@",{requires:["intl"]});
YUI.add("person-menu-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("person-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".no-menu"].concat(e.excludeSelectors||[]),this.personSelector=".avatar.person, .photo-attribution .attribution-icon, .comment-icon.circle-icon a, .show-person-menu",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},toJSON:function(){var t=e.merge(this.get("user"));return t},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.personSelector,this))},onClickTarget:function(t){var n=this,r;this.shouldProcessTarget(t.target)&&(t.preventDefault(),t.halt(),r=t.target.ancestor().one(this.personSelector)||t.target.ancestor(this.personSelector)||t.target.ancestor("a"),this.createParamsAndManageState(r),e.rapidTracker.beacon(n.name,"personCardOpened"))},shouldProcessTarget:function(e){return e.ancestor()!==null&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var n={appContext:this.appContext,isActiveViewAgnostic:!0},r="",i;return r=e.getData("person-nsid")||e.ancestor().getData("person-nsid"),r||(i=e.getAttribute("href")||e.ancestor().getAttribute("href"),i.indexOf("/photos")===0?r=i.replace("/photos/","").replace("/",""):i.indexOf("/groups/")===0&&(r=i.slice(i.lastIndexOf("/")+1))),t.nsid(r)?n.nsid=r:n.pathAlias=r,n.signature=r,n},createDialog:function(t,n){var r,i=this;this.fire("open"),e.fire("personMenuOpen"),this.dialogCache.some(function(e){return e.key===t.signature?(r=e.dialog,!0):!1}),r?r.set("anchorElement",n.ancestor().hasClass("comment-icon")?n.ancestor():n):(r=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,anchorOffsetHorizontal:0,observePageResize:!0,anchorElement:n.ancestor().hasClass("comment-icon")?n.ancestor():n,subview:new e.Views["person-card-view"](t)}),r.on("clickOverlay",function(e){i.nextElClicked=[e.clientX,e.clientY]}),r.on("closeDroparound",function(){setTimeout(function(){if(i.nextElClicked){var t=document.elementFromPoint(i.nextElClicked[0],i.nextElClicked[1]),n;t&&(n=e.one(t),n&&i.personSelector.split(",").some(function(e){return n.hasClass(e.replace(".",""))})&&i.shouldProcessTarget(n)&&i.createParamsAndManageState(n)),i.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:r})),this.currentDialog=r,r.show()},closeDialog:function(){this.currentDialog&&(this.currentDialog.close(),e.fire("personMenuClose"))},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=[]}})},"@VERSION@",{requires:["flickr-promise","flickr-view","fluid-droparound-view","person-card-view"],langBundles:["person","common"]});
YUI.add("hermes-template-group-card",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n.each.call(t!=null?t:{},t!=null?t.groupPool:t,{name:"each",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:""},2:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression,c=e.lambda;return'				\n				<a href="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'" width="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.width:s,t))+'" height="'+l(c((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.height:s,t))+'"\n'+((s=n["if"].call(u,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+"				></a>\n				\n"},3:function(e,t,n,r,i){return'					class="restricted"\n'},5:function(e,t,n,r,i){var s;return'					style="background: url('+e.escapeExpression(e.lambda((s=(s=t!=null?t.sizes:t)!=null?s.sq:s)!=null?s.displayUrl:s,t))+');"\n'},7:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'				<p class="tertiary">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.BE_THE_FIRST"},data:i}))+'</p>\n				<p class="tertiary"><a href="'+a(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.photos:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:i}))+"</a></p>\n"},10:function(e,t,n,r,i){return"				<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_PHOTOS"},data:i}))+"</p>\n"},12:function(e,t,n,r,i){var s,o=e.escapeExpression;return'	<a href="'+o(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.admin:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:i}))+"</a>\n"},14:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.group:t)!=null?s.isModerator:s,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:""},15:function(e,t,n,r,i){var s,o=e.escapeExpression;return'		<a href="'+o(e.lambda((s=t!=null?t.groupURLS:t)!=null?s.admin:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'\n<div>\n	<section>\n		<div class="join-subview">\n\n			'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["join-group-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n		</div>\n\n		<div class="attribution">\n			<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.about:s,t))+'">\n				<h3 class="fade-out">'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,(s=t!=null?t.group:t)!=null?s.title:s,{name:"renderTrustedMarkup",hash:{},data:i}))+'</h3>\n			</a>\n		</div>\n		<div class="stats">\n			<span class="secondary fade-out">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{createdYear:t!=null?t.createdYear:t,intlName:"groups.CREATED_YEAR"},data:i}))+" - "+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{updatedAgo:t!=null?t.updatedAgo:t,intlName:"groups.UPDATED_TIME_AGO"},data:i}))+'</span>\n		</div>\n\n		<div class="recent-photos">\n'+((s=n["if"].call(o,t!=null?t.groupPool:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.photos:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.PHOTOS_LINK_LABEL"},data:i}))+'</a>\n	<a href="'+a(f((s=t!=null?t.groupURLS:t)!=null?s.discussions:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSIONS_LINK_LABEL"},data:i}))+"</a>\n"+((s=n["if"].call(o,(s=t!=null?t.group:t)!=null?s.isAdmin:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:"")+"</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.groupPathAlias=e.groupPathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"join-group-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,shortLabels:!0,theme:"light"}},loadState:function(){var t=this,n=this.groupId;return(new e.FlickrPromise({groupPool:this.appContext.getModel("group-pool-models",n),group:this.appContext.getModel("group-models",n),groupInfo:this.appContext.getModel("group-info-models",n)})).then(function(e){return t.groupModel=e.group,t.groupInfo=e.groupInfo,e.groupPool.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.groupPhotos=e})},function(e){t.loadingError=!0})},buildContainer:function(){var t,n=!1,r;return this.loadingError?this.setContainerHTML('<span class="error-group">'+this.intlMessage({intlName:"groups.ERROR_LOADING"})+"</span>"):(t=this.groupModel.toJSON(),r=this.groupInfo.getValue("throttle"),n=r.mode!=="disabled"&&r.remaining>0||r.mode==="none",n&&(n=t.isMember),this.setContainerWithTemplate("group-card",{group:t,groupPool:this.groupPhotos.map(function(e){return e.toJSON()}),canAddPhotos:n,groupURLS:e.URLHelper.generateGroupUrls(this.groupModel),createdYear:t.dateCreated.year(),updatedAgo:this.intlMessage(e.Handlebars.helpers._friendlySinceDate(t.latestGroupActivity,!0,!0))})),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",function(e){e.preventDefault(),console.log("join group")},".join")),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-group-card","url-helper","handlebars-helpers"],langBundles:["groups","relative-dates"]});
YUI.add("group-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("group-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".large",".no-menu"].concat(e.excludeSelectors||[]),this.groupSelector=".avatar.group",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.groupSelector,this))},onClickTarget:function(e){var t;this.shouldProcessTarget(e.target)&&(e.preventDefault(),e.halt(),t=e.target,this.createParamsAndManageState(t))},shouldProcessTarget:function(e){return e.ancestor()!==null&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var t={appContext:this.appContext,isActiveViewAgnostic:!0};return t.groupId=e.getData("group-nsid"),t.signature=t.groupId,t},createDialog:function(t,n){var r=this,i;this.fire("open"),this.dialogCache.some(function(e){return e.key===t.signature?(i=e.dialog,!0):!1}),i?i.set("anchorElement",n):(i=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,observePageResize:!0,anchorElement:n,anchorOffsetHorizontal:4,subview:new e.Views["group-card-view"](t)}),i.on("clickOverlay",function(e){r.nextElClicked=[e.clientX,e.clientY]}),i.on("closeDroparound",function(){setTimeout(function(){if(r.nextElClicked){var t=document.elementFromPoint(r.nextElClicked[0],r.nextElClicked[1]),n,i;t&&(n=e.one(t),i=r.groupSelector.split(",").some(function(e){return n.hasClass(e.replace(".",""))}),n&&i&&r.shouldProcessTarget(n)&&r.createParamsAndManageState(n)),r.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:i})),this.currentDialog=i,i.show()},closeDialog:function(){this.currentDialog&&this.currentDialog.close()},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=null}})},"@VERSION@",{requires:["flickr-promise","flickr-view","fluid-droparound-view","group-card-view"],langBundles:["common"]});
YUI.add("hermes-template-signup-interstitial",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'<div class="signup-interstitial-body interstitial-fade">\n	<div class="close-x"></div>\n	<div class="body">\n		<div class="logo"></div>\n		<h3 class="signup-interstitial-message">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE"},data:i}))+'</h3>\n		<div><a href="/signup" class="butt large action signup-button">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i}))+'</a></div>\n		<a href="/signin" class="signin-link">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-interstitial",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
